{
	"info": {
		"_postman_id": "4d4e0294-106e-4f45-ab91-162125ff1249",
		"name": "TI-7.3.3",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "check install",
			"item": [
				{
					"name": "fin INJECTION_GRILLE_TARIFAIRE",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "02abfddf-ed0a-4922-87a8-c0b95160be3e",
								"exec": [
									"  tests[\"WAIT 5 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 5 seconds before request.\");",
									"  }, 5000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=INJECTION_GRILLE_TARIFAIRE",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "INJECTION_GRILLE_TARIFAIRE"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "fin INJECTION_CONTRAT",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "083dddc5-84e3-47eb-ba4f-53c2071bb6ba",
								"exec": [
									"  tests[\"WAIT 5 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 5 seconds before request.\");",
									"  }, 5000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=INJECTION_CONTRAT",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "INJECTION_CONTRAT"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "fin \tINJECTION_COMMANDE_COFI",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "5ae3e8f0-0581-45f8-ad04-b26ecd33ffdd",
								"exec": [
									"  tests[\"WAIT 5 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 5 seconds before request.\");",
									"  }, 5000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=INJECTION_COMMANDE_COFI",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "INJECTION_COMMANDE_COFI"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "provider AXIONE",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"code = AXIONE\"] = jsonData.provider.code === \"AXIONE\";",
									"tests[\"nb CF = 4\"] = jsonData.provider.customFields.customField.length === 4;",
									"for (let pas =0; pas < 4; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + jsonData.provider.customFields.customField[pas].code ] = (",
									"    jsonData.provider.customFields.customField[pas].code === \"CF_INDICE_PRIX_CONSOMMATION\"     ",
									"    || jsonData.provider.customFields.customField[pas].code === \"CF_PLAFOND_TARIFAIRE\"     ",
									"    || jsonData.provider.customFields.customField[pas].code === \"CF_INDICE_SALAIRE_MENSUEL_BRUT\"    ",
									"    || jsonData.provider.customFields.customField[pas].code === \"CF_PRV_CHARGE_PRICE\" )",
									"    ;",
									"}",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"FREE-AXIONE\",\n  \"billingAccount\" : \"FREE\",\n  \"customerAccount\" : \"FREE\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/provider",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"provider"
							]
						}
					},
					"response": []
				},
				{
					"name": "seller AXIONE",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"is.axione\"] = jsonData.seller.code === \"AXIONE\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/seller?sellerCode=AXIONE&inheritCF=INHERIT_NO_MERGE",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"seller"
							],
							"query": [
								{
									"key": "sellerCode",
									"value": "AXIONE"
								},
								{
									"key": "inheritCF",
									"value": "INHERIT_NO_MERGE"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "seller NPDC",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"",
									"tests[\"is.npdc\"] = jsonData.seller.code === \"NPDC\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/seller?sellerCode=NPDC&inheritCF=INHERIT_NO_MERGE",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"seller"
							],
							"query": [
								{
									"key": "sellerCode",
									"value": "NPDC"
								},
								{
									"key": "inheritCF",
									"value": "INHERIT_NO_MERGE"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "customer FREE",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"oc\"] = jsonData.customer.customerCategory === \"OC\";",
									"tests[\" 1 customerAccount\"] = jsonData.customer.customerAccounts.customerAccount.length === 1;",
									"tests[\"customerAccount FREE\"] = jsonData.customer.customerAccounts.customerAccount[0].code === \"FREE\";",
									"tests[\"1 billingAccount\"] = jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount.length === 1;",
									"tests[\"billingAccount FREE\"] = jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount[0].code === \"FREE\";",
									"tests[\"1 cf sur ba\"] = jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount[0].customFields.customField.length  === 1;",
									"tests[\"cf sur ba CF_BA_BILL_KIND = CAPEX\"] = jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount[0].customFields.customField[0].code  === \"CF_BA_BILL_KIND\" ",
									"    &&",
									"    jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount[0].customFields.customField[0].stringValue  === \"CAPEX\" ",
									";",
									"",
									"var uas = jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount[0].userAccounts.userAccount;",
									"",
									"tests[\"12 userAccounts\"] = uas.length  === 12;",
									"",
									"for (let pas =0; pas < uas.length ; pas++) {",
									"    tests[\"----UA\" + pas + \" ok \" + uas[pas].code + \" +  \" + uas[pas].customFields.customField.length + \" CF\" ] = (",
									"      uas[pas].code === \"FREE-AXIONE\"  ",
									"    ||uas[pas].code === \"FREE-VAUC\"     ",
									"    ||uas[pas].code === \"FREE-NPDC\" ",
									"    ||uas[pas].code === \"FREE-AISN\"     ",
									"    ||uas[pas].code === \"FREE-ADTH\"     ",
									"    ||uas[pas].code === \"FREE-BEFO\"     ",
									"    ||uas[pas].code === \"FREE-NATH\" ",
									"    ||uas[pas].code === \"FREE-NIVE\" ",
									"    ||uas[pas].code === \"FREE-SART\"     ",
									"    ||uas[pas].code === \"FREE-SIEL\"     ",
									"    ||uas[pas].code === \"FREE-SPTH\"",
									"    ||uas[pas].code === \"FREE-EURE\"",
									"    )",
									"&& uas[pas].customFields.customField.length > 0",
									"    ",
									"    ",
									"    ;",
									"}",
									"",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/account/customer?customerCode=FREE",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"account",
								"customer"
							],
							"query": [
								{
									"key": "customerCode",
									"value": "FREE"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "customer FTEL",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"oc\"] = jsonData.customer.customerCategory === \"OC\";",
									"tests[\" 1 customerAccount\"] = jsonData.customer.customerAccounts.customerAccount.length === 1;",
									"tests[\"customerAccount FTEL\"] = jsonData.customer.customerAccounts.customerAccount[0].code === \"FTEL\";",
									"tests[\"1 billingAccount\"] = jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount.length === 1;",
									"tests[\"billingAccount FTEL\"] = jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount[0].code === \"FTEL\";",
									"tests[\"1 cf sur ba\"] = jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount[0].customFields.customField.length  === 1;",
									"tests[\"cf sur ba CF_BA_BILL_KIND = LISSE\"] = jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount[0].customFields.customField[0].code  === \"CF_BA_BILL_KIND\" ",
									"    &&",
									"    jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount[0].customFields.customField[0].stringValue  === \"LISSE\" ",
									";",
									"",
									"var uas = jsonData.customer.customerAccounts.customerAccount[0].billingAccounts.billingAccount[0].userAccounts.userAccount;",
									"",
									"tests[\"12 userAccounts\"] = uas.length  === 12;",
									"",
									"for (let pas =0; pas < uas.length ; pas++) {",
									"    tests[\"----UA\" + pas + \" ok \" + uas[pas].code + \" +  \" + uas[pas].customFields.customField.length + \" CF\" ] = (",
									"      uas[pas].code === \"FTEL-AXIONE\"  ",
									"    ||uas[pas].code === \"FTEL-VAUC\"     ",
									"    ||uas[pas].code === \"FTEL-NPDC\" ",
									"    ||uas[pas].code === \"FTEL-AISN\"     ",
									"    ||uas[pas].code === \"FTEL-ADTH\"     ",
									"    ||uas[pas].code === \"FTEL-BEFO\"     ",
									"    ||uas[pas].code === \"FTEL-NATH\" ",
									"    ||uas[pas].code === \"FTEL-NIVE\" ",
									"    ||uas[pas].code === \"FTEL-SART\"     ",
									"    ||uas[pas].code === \"FTEL-SIEL\"     ",
									"    ||uas[pas].code === \"FTEL-SPTH\"",
									"    ||uas[pas].code === \"FTEL-EURE\"",
									"    )",
									"&& uas[pas].customFields.customField.length > 0",
									"    ",
									"    ",
									"    ;",
									"}",
									"",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/account/customer?customerCode=FTEL",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"account",
								"customer"
							],
							"query": [
								{
									"key": "customerCode",
									"value": "FTEL"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "offer template OFFRE_FTTH_PASSIF",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"",
									"tests[\"is.offer\"] = jsonData.offerTemplate.code === \"OFFRE_FTTH_PASSIF\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/catalog/offerTemplate?offerTemplateCode=OFFRE_FTTH_PASSIF",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"catalog",
								"offerTemplate"
							],
							"query": [
								{
									"key": "offerTemplateCode",
									"value": "OFFRE_FTTH_PASSIF"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "offer template OFFRE_RESEAU",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"is.offer\"] = jsonData.offerTemplate.code === \"OFFRE_RESEAU\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/catalog/offerTemplate?offerTemplateCode=OFFRE_RESEAU",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"catalog",
								"offerTemplate"
							],
							"query": [
								{
									"key": "offerTemplateCode",
									"value": "OFFRE_RESEAU"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Tronc",
			"item": [
				{
					"name": "create tronc",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"OSEN\",\n  \"objectType\" : \"Prise_de_Commande__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"FREE-TRONC-20172947\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"AXIONE\",\n  \"chargeCode\" : \"COLL-NRO-LIV-FAS\",\n  \"quantity\" : 1,\n  \"uid\" : \"a0G0Q000004aFiOUAU\",\n  \"origine\" : \"TRONC\",\n  \"eventDate\" : \"2020-02-04T11:23:20\",\n  \"details\" : {\n    \"dateResiliation\" : null,\n    \"portLivraison\" : null,\n    \"idCharlieNRO\" : null,\n    \"prixVenteManuel\" : null,\n    \"dateMES\" : null,\n    \"produitCommande\" : \"PDC172946\",\n    \"typeTronc\" : \"FTTH-VLAN\",\n    \"prixVenteMensuel\" : null,\n    \"motifModif\" : null,\n    \"prixCatalogue\" : null,\n    \"villeNRO\" : null,\n    \"debit\" : \"10 Gbits\",\n    \"codePostalNRO\" : null,\n    \"dateModification\" : null,\n    \"techno\" : \"Tronc\",\n    \"referenceNRO\" : null,\n    \"numeroCommande\" : \"PDC172946\",\n    \"referenceCommerciale\" : \"FREE-TRONC-20172947\",\n    \"commande\" : \"PDC172946\",\n    \"referenceClient\" : \"free\",\n    \"prixTotal\" : null,\n    \"referenceTechnique\" : \"Free\",\n    \"portLivraisonSecurisation\" : null,\n    \"dateDebutFacturation\" : \"2020-01-23T01:00:00\",\n    \"dateOperation\" : \"2020-02-04T11:23:20\",\n    \"statut\" : null,\n    \"referenceTRONC\" : \"FREE-TRONC-20172947\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.osen.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.osen.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getTronc",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"TRONC#FREE-TRONC-20172947\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-AXIONE\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"3 CF sur la ssc\"] = cf.length === 3 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_REF_TRONC\"   &&  cf[pas].stringValue === \"FREE-TRONC-20172947\")   ",
									"    || (cf[pas].code === \"CF_SUB_TYPE\"  &&  cf[pas].stringValue === \"X\")     ",
									"    || (cf[pas].code === \"CF_SUB_DEBIT\"  && cf[pas].doubleValue === 10240))",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"COLL-NRO-LIV-FAS\"   &&  si[pas].status === \"TERMINATED\")   ",
									"   )",
									"    ;",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "a5cb4308-80e6-4135-af22-5c3ad94fc414",
								"exec": [
									"  tests[\"WAIT 5 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 5 seconds before request.\");",
									"  }, 5000);",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=TRONC%23FREE-TRONC-20172947",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "TRONC%23FREE-TRONC-20172947"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Cnroa",
			"item": [
				{
					"name": "create cnroa",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"OSEN\",\n  \"objectType\" : \"Prise_de_Commande__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"FREE-CNROA-20172948\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n  \"chargeCode\" : \"COLL-NRO-ACCES-FAS\",\n  \"quantity\" : 1,\n  \"uid\" : \"a0G0Q000004aFlwUAE\",\n  \"origine\" : \"CNROA\",\n  \"eventDate\" : \"2020-02-04T11:24:24\",\n  \"details\" : {\n    \"dateResiliation\" : null,\n    \"dateMad\" : \"2020-01-16T01:00:00\",\n    \"dateModification\" : null,\n    \"idCharlieNRO\" : null,\n    \"techno\" : \"CNROA\",\n    \"referenceNRO\" : \"SHL_62865_VITR\",\n    \"dateMes\" : \"2020-01-16T01:00:00\",\n    \"numeroCommande\" : \"PDC172947\",\n    \"referenceCommerciale\" : \"FREE-CNROA-20172948\",\n    \"dateFinEngagement\" : null,\n    \"commande\" : \"PDC172947\",\n    \"produitCommande\" : \"PDC172947\",\n    \"referenceClient\" : \"free\",\n    \"typeLivraison\" : \"Régional\",\n    \"referenceTechnique\" : \"SHL_62865_VITR\",\n    \"dateDebutFacturation\" : \"2020-01-16T01:00:00\",\n    \"villeNRO\" : \"VITRY-EN-ARTOIS\",\n    \"debit\" : \"10 Gbits\",\n    \"dateOperation\" : \"2020-02-04T11:24:24\",\n    \"codePostalNRO\" : \"62490\",\n    \"statut\" : \"Actif\",\n    \"referenceTRONC\" : \"FREE-TRONC-20172947\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.osen.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.osen.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getCnroa",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"CNROA#FREE-CNROA-20172948\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"5 CF sur la ssc\"] = cf.length === 5 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_REF_TRONC\"   &&  cf[pas].stringValue === \"FREE-TRONC-20172947\")   ",
									"    || (cf[pas].code === \"CF_SUB_REF_NRO\"  &&  cf[pas].stringValue === \"SHL_62865_VITR\")     ",
									"    || (cf[pas].code === \"CF_SUB_DEBIT\"  && cf[pas].doubleValue === 10240))",
									"    || (cf[pas].code === \"CF_SUB_TYPE_LIVRAISON\"  &&  cf[pas].stringValue === \"Régional\")   ",
									"    || (cf[pas].code === \"CF_SUB_TYPE\"  &&  cf[pas].stringValue === \"Y\")   ",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"COLL-NRO-ACCES-FAS\"   &&  si[pas].status === \"TERMINATED\")   ",
									"   )",
									"    ;",
									"}",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "0365c8ed-46bd-4fe8-bc3d-52ea2ad83891",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=CNROA%23FREE-CNROA-20172948",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "CNROA%23FREE-CNROA-20172948"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "charlie NRO-PM",
			"item": [
				{
					"name": "create PM/NRO",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"id\" : 5879,\n  \"nro\" : {\n \"id\" : 415,\n \"nomOi\" : \"NPDC\",\n  \"ville\" : \"NOYANT ET ACONIN\",\n  \"codeOi\" : \"NPDC\",\n \"adresse\" : \"RUE DE LA PLACE\",\n \"codeInsee\" : \"02564\",\n  \"popUsager\" : false,\n  \"codePostal\" : \"02200\",\n \"referenceNro\" : \"SHL_62865_VITR\",\n \"dateNroDeploye\" : \"2018-03-21\"\n  },\n  \"ville\" : \"ROZIERES SUR CRISE\",\n  \"adresse\" : \"1 RUE DE LIEVAL\",\n  \"etatPmr\" : \"DEPLOYE\",\n \"codeInsee\" : \"02663\",\n \"codePostal\" : \"02200\",\n \"pmrMultiPmt\" : false,\n \"referencePmr\" : \"ADR_62322_PRI9\",\n  \"etatLienPmNro\" : \"DEPLOYE\",\n  \"referencePmrNro\" : \"CPN_ADR_62322_PRI9_SHL_62865_VITR\",\n  \"capaciteMaxPmIpe\" : 520,\n  \"baieTransportPrdm\" : \"RTO_02564_NOYA_Baie2\",\n \"longueurLienPmPrdm\" : 5.29,\n \"dateMAD\": \"2018-09-20T15:50:49.919\"\n}\n"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.charlie.pmr.v2%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.charlie.pmr.v2%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc nro",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"N#SHL_62865_VITR|415\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"1 CF sur la ssc\"] = cf.length === 1 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"        (cf[pas].code === \"CF_SUB_INFO\"  )     ",
									"    )",
									"    ;",
									"}",
									"",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "d414b96d-07a8-4677-98c9-a9fd9a28ffd2",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=N%23SHL_62865_VITR|415",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "N%23SHL_62865_VITR|415"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc pm",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"P#ADR_62322_PRI9|5879\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"3 CF sur la ssc\"] = cf.length === 3 ;",
									"",
									"for (let pas = 0; pas < cf.length ; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_NRO_SUB\"   &&  cf[pas].stringValue === \"N#SHL_62865_VITR|415\")   ",
									"   ||",
									"   (cf[pas].code === \"CF_SUB_ETAT_PM\"   &&  cf[pas].stringValue === \"DEPLOYE\")   ",
									"   ||",
									"   (cf[pas].code === \"CF_SUB_INFO\"   )   ",
									"",
									"   ",
									"    ",
									"    )",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "5983e194-051e-40c2-93a4-4599c18d2d52",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=P%23ADR_62322_PRI9|5879",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "P%23ADR_62322_PRI9|5879"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Acces",
			"item": [
				{
					"name": "create acces",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"ACCES\",\n  \"objectType\" : \"CommandeAccesFTTH_V2__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"yFREE-FTTH-501754\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n  \"chargeCode\" : \"ACCES_FTTH\",\n  \"quantity\" : 1,\n  \"uid\" : \"a1n0Q000000Bg7AQAS\",\n  \"origine\" : \"ACCES\",\n  \"eventDate\" : \"2020-02-05T15:00:58\",\n  \"details\" : {\n    \"referencePM\" : \"ADR_62322_PRI9\",\n    \"dateResiliation\" : null,\n    \"commune\" : \"BILLERE\",\n    \"churn\" : false,\n    \"dateMes\" : \"2019-10-03T16:00:00\",\n    \"identifiantImmeuble\" : \"IMM64-497250\",\n    \"statutRouteOptique\" : \"OK\",\n    \"operateurPrecedent\" : null,\n    \"ordreRouteOptique\" : \"CONFIRMATION\",\n    \"statutService\" : \"Activée\",\n    \"idService\" : \"SERV-0107049\",\n    \"etatMAD\" : \"OK\",\n    \"typeCommandeRetenue\" : \"COFI\",\n    \"referencePrestationPrise\" : \"FREE-FTTH-501754\",\n    \"codeMotifEchecMAD\" : null,\n    \"typeRaccordement\" : \"STOC\",\n    \"codeAdresse\" : \"64129222C4\",\n    \"dateAnnulation\" : null,\n    \"referencePTO\" : \"SPTH-HUTT-0121\",\n    \"codePostal\" : \"64140\",\n    \"referenceNRO\" : \"SHL_62865_VITR\",\n    \"commande\" : \"THD0000022768\",\n    \"motifEchecCR\" : null,\n    \"motifEchecAR\" : null,\n    \"causeReprovisioning\" : null,\n    \"refCommandePriseInterne\" : \"ADR_STOC_20191017_4\",\n    \"priseExistante\" : true,\n    \"dateDebutFacturation\" : \"2019-10-17T15:53:24\",\n    \"typeChurn\" : null,\n    \"modeStoc\" : false,\n    \"etatCR\" : \"OK\",\n    \"etatAR\" : \"OK\",\n    \"typeRouteOptique\" : \"TDC64-HUTT1-ACCES-B\",\n    \"dateOperation\" : \"2020-02-05T15:00:58\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.acces.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.acces.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#yFREE-FTTH-501754\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"CREATED\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_62322_PRI9\" ",
									";",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length ; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")   ",
									"   )",
									"    ;",
									"}",
									"",
									"var cf = jsonData.subscription.services.serviceInstance[0].customFields.customField ;",
									"",
									"tests[\"8 CF sur le SI\"] = cf.length === 8;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    cf[pas].code === \"CF_SRV_TOTAL_PRICE\"     ",
									"    || cf[pas].code === \"CF_SRV_QUANTITY\"     ",
									"    || (cf[pas].code === \"CF_SRV_NB_BRASSAGE\"  && cf[pas].doubleValue === 1)",
									"    || cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" ",
									"    || cf[pas].code === \"CF_SRV_INVOICE_DATA\"     ",
									"    || cf[pas].code === \"CF_SRV_UNIT_PRICE\"    ",
									"    || cf[pas].code === \"CF_SRV_DEAL_NAME\" ",
									"    || cf[pas].code === \"CF_SRV_DATE_MES\")",
									"    ;",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "1150a1e4-6e0c-4cb4-8a0c-714e6790a5c2",
								"exec": [
									"  tests[\"WAIT 5 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 5 seconds before request.\");",
									"  }, 5000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23yFREE-FTTH-501754",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23yFREE-FTTH-501754"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getPM",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"PM#ADR_62322_PRI9\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField",
									"tests[\" CF\"] = cf.length === 7;",
									"",
									"for (let pas = 0; pas < cf.length ; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_NRO_SUB\"   &&  cf[pas].stringValue === \"SHL_62865_VITR\")   ",
									"    ||",
									"        (cf[pas].code === \"CF_SUB_NB_LGT\"   &&  cf[pas].longValue === 1)",
									"    ||",
									"    (cf[pas].code === \"CF_SUB_REF_TRONC\"   &&  cf[pas].stringValue === \"FREE-TRONC-20172947\")",
									"    ||",
									"    (cf[pas].code === \"CF_SUB_ETAT_PM\"   &&  cf[pas].stringValue === \"DEPLOYE\")",
									"    ||",
									"    (cf[pas].code === \"CF_SUB_TYPE_LIVRAISON\"   &&  cf[pas].stringValue === \"Régional\")",
									"    ||",
									"    (cf[pas].code === \"CF_SUB_ZONE\"   &&  cf[pas].stringValue === \"\")",
									"   )",
									"    ||",
									"    (cf[pas].code === \"CF_SUB_REF_PM\"   &&  cf[pas].stringValue === \"ADR_62322_PRI9\")",
									"}",
									"",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "1150a1e4-6e0c-4cb4-8a0c-714e6790a5c2",
								"exec": [
									"  tests[\"WAIT 5 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 5 seconds before request.\");",
									"  }, 5000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=PM%23ADR_62322_PRI9",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "PM%23ADR_62322_PRI9"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Cacti",
			"item": [
				{
					"name": "create cacti",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"CACTI\",\n  \"objectType\" : \"Conso\",\n  \"operation\" : \"MODIFCATION\",\n  \"access\" : \"FREE-TRONC-20172947\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n  \"origine\" : \"TRONC\",\n  \"chargeCode\" : \"COL-NRO-LIV-ABO\",\n  \"uid\" : \"cacti#20180131#BOUY-CNROA-17137598\",\n  \"quantity\" : 5,\n  \"eventDate\" : \"2019-06-31T00:00:00\",\n  \"details\" : {\n  \"nombreBrassage\" : 1.0,\n  \"commande\" : \"PDC-XYZ\"\n  }\n}\n"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.cacti.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.cacti.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "valid cacti",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"TRONC#FREE-TRONC-20172947\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-AXIONE\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"4 CF sur la ssc\"] = cf.length === 4 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_REF_TRONC\"   &&  cf[pas].stringValue === \"FREE-TRONC-20172947\")   ",
									"    || (cf[pas].code === \"CF_SUB_TYPE\"  &&  cf[pas].stringValue === \"X\")     ",
									"    || (cf[pas].code === \"CF_SUB_DEBIT\"  && cf[pas].doubleValue === 10240)",
									"    || (cf[pas].code === \"CF_SUB_TRONC_USAGE\"  && cf[pas].mapValue[\"01/06/2019\"].value === \"5.0|0|0|0\")",
									"    )",
									"    ;",
									"}",
									"",
									"",
									"",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"COLL-NRO-LIV-FAS\"   &&  si[pas].status === \"TERMINATED\")   ",
									"   )",
									"    ;",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "c69ce15b-9500-4a58-a6de-cdc654e84f92",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=TRONC%23FREE-TRONC-20172947",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "TRONC%23FREE-TRONC-20172947"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "charlie Cofi",
			"item": [
				{
					"name": "create cofi",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n \"oc\": \"FREE\",\n \"oi\": \"NPDC\",\n \"refPmr\": \"ADR_62322_PRI9\",\n \"dateMadPmr\": \"20/09/2018\",\n \"refZoneCofi\": \"NTHD16\",\n \"codeInseePmr\": \"02643\",\n \"typeIngenierie\": \"Mono\",\n \"batiments\": [\n {\n  \"idBatiment\": \"02-113121\",\n \"refPrestPbs\": \"FE_PM_02643_ADR_02643_GRAN_20180920\",\n  \"nbTotalLgtBat\": 1,\n \"dateCablageBatiment\": \"20/09/2018\"\n  }\n ]\n}\n\n"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.charlie.factu.cofi.v1%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.charlie.factu.cofi.v1%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc bat",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"B#NTHD16|02-113121\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"3 CF sur la ssc\"] = cf.length === 3 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"        (cf[pas].code === \"CF_SUB_REF_PM\"  &&  cf[pas].stringValue === \"ADR_62322_PRI9\")     ",
									"    ||  (cf[pas].code === \"CF_SUB_NB_LGT\"  && cf[pas].longValue === 1)",
									"    ||  (cf[pas].code === \"CF_SUB_PBS\"  && cf[pas].mapValue[\"FREE\"].value === \"S#FE_PM_02643_ADR_02643_GRAN_20180920\")",
									"    )",
									"    ;",
									"}",
									"",
									"",
									"",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "bc380dee-7b3f-4be0-a330-67894fa48958",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=B%23NTHD16|02-113121",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "B%23NTHD16|02-113121"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc zone",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"Z#NTHD16\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"1 CF sur la ssc\"] = cf.length === 1 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_INFO\"   &&  cf[pas].stringValue === \"MONO\")   ",
									"   ",
									"    )",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=Z%23NTHD16",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "Z%23NTHD16"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc pbs",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"S#FE_PM_02643_ADR_02643_GRAN_20180920\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields ;",
									"",
									"tests[\"No CF\" ] = cf ===undefined ;",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=S%23FE_PM_02643_ADR_02643_GRAN_20180920",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "S%23FE_PM_02643_ADR_02643_GRAN_20180920"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc pm",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"P#ADR_62322_PRI9|5879\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"4 CF sur la ssc\"] = cf.length === 4 ;",
									"",
									"for (let pas = 0; pas < cf.length ; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_NRO_SUB\"   &&  cf[pas].stringValue === \"N#SHL_62865_VITR|415\")   ",
									"   ||",
									"   (cf[pas].code === \"CF_SUB_ETAT_PM\"   &&  cf[pas].stringValue === \"DEPLOYE\")   ",
									"   ||",
									"   (cf[pas].code === \"CF_SUB_INFO\"   )   ",
									"    ||",
									"   (cf[pas].code === \"CF_SUB_ZONE\" &&  cf[pas].stringValue === \"NTHD16\"   ) ",
									"   ",
									"    ",
									"    )",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "5983e194-051e-40c2-93a4-4599c18d2d52",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=P%23ADR_62322_PRI9|5879",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "P%23ADR_62322_PRI9|5879"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "EOM activation",
			"item": [
				{
					"name": "job activation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"EOM_ACTIVATION\",\n\n  \"customFields\" : {\n    \"customField\" : [ {\n      \"code\" : \"ScriptingJob_variables\",\n\n      \"mapValue\" : {\n        \"BA_CODE\" : {\"value\" : \"FREE\" },\n        \"FROM_DATE\" : {\"value\" : \"01/10/2019\"}\n      }\n    } ]\n  }\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/execute",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "fin activation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b4f7588c-97eb-4b3b-b433-9944b842b9cc",
								"exec": [
									"  tests[\"WAIT 10 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 10 seconds before request.\");",
									"  }, 10000);",
									"",
									"  "
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=EOM_ACTIVATION",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "EOM_ACTIVATION"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#yFREE-FTTH-501754\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_62322_PRI9\" ",
									";",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"ACTIVE\")   ",
									"   )",
									"    ;",
									"}",
									"",
									"var cf = jsonData.subscription.services.serviceInstance[0].customFields.customField ;",
									"",
									"tests[\"8 CF sur le SI\"] = cf.length === 8;",
									"",
									"for (let pas = 0; pas < 8; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    cf[pas].code === \"CF_SRV_TOTAL_PRICE\"     ",
									"    || cf[pas].code === \"CF_SRV_QUANTITY\"     ",
									"    || (cf[pas].code === \"CF_SRV_NB_BRASSAGE\"  && cf[pas].doubleValue === 1)",
									"    || cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" ",
									"    || cf[pas].code === \"CF_SRV_INVOICE_DATA\"     ",
									"    || cf[pas].code === \"CF_SRV_UNIT_PRICE\"    ",
									"    || cf[pas].code === \"CF_SRV_DEAL_NAME\" ",
									"    || cf[pas].code === \"CF_SRV_DATE_MES\")",
									"    ;",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "d6618070-081c-4967-91ae-14d07f1187cb",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23yFREE-FTTH-501754",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23yFREE-FTTH-501754"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "EOM acces",
			"item": [
				{
					"name": "job acces",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"EOM_COMPUTE_ACCES\",\n\n  \"customFields\" : {\n    \"customField\" : [ {\n      \"code\" : \"ScriptingJob_variables\",\n\n      \"mapValue\" : {\n        \"BA_CODE\" : {\"value\" : \"FREE\" },\n        \"FROM_DATE\" : {\"value\" : \"01/10/2019\"}\n      }\n    } ]\n  }\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/execute",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "fin acces",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b4f7588c-97eb-4b3b-b433-9944b842b9cc",
								"exec": [
									"  tests[\"WAIT 20 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 20 seconds before request.\");",
									"  }, 20000);",
									"",
									"  "
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=EOM_COMPUTE_ACCES",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "EOM_COMPUTE_ACCES"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#yFREE-FTTH-501754\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_62322_PRI9\" ",
									";",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"2 SI sur la ssc\"] = si.length === 2 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"ACTIVE\") ",
									"    ||",
									"    (si[pas].code === \"FTTHP-LOC-NRO_2019-10-01\"   &&  si[pas].status === \"TERMINATED\") ",
									"",
									"   )",
									"    ;",
									"}",
									"",
									"var cf = jsonData.subscription.services.serviceInstance[0].customFields.customField ;",
									"",
									"tests[\"8 CF sur le SI\"] = cf.length === 8;",
									"",
									"for (let pas = 0; pas < cf.length ; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    cf[pas].code === \"CF_SRV_TOTAL_PRICE\"     ",
									"    || cf[pas].code === \"CF_SRV_QUANTITY\"     ",
									"    || (cf[pas].code === \"CF_SRV_NB_BRASSAGE\"  && cf[pas].doubleValue === 1)",
									"    || cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" ",
									"    || cf[pas].code === \"CF_SRV_INVOICE_DATA\"     ",
									"    || cf[pas].code === \"CF_SRV_UNIT_PRICE\"    ",
									"    || cf[pas].code === \"CF_SRV_DEAL_NAME\" ",
									"    || cf[pas].code === \"CF_SRV_DATE_MES\")",
									"    ;",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "74205326-931e-49cc-a1e7-27e0ee70bebe",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23yFREE-FTTH-501754",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23yFREE-FTTH-501754"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "EOM cofi",
			"item": [
				{
					"name": "job cofi",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "64c31ed8-9501-4785-b95a-28cdbee93476",
								"exec": [
									"var date2=new Date(\"1995-12-17T03:24:00\");",
									"var date1=new Date();",
									"var formated_date = date1.getFullYear() + \"-\" + (\"0\"+(date1.getMonth()+1)).slice(-2) + \"-\" + (\"0\"+date1.getDate()).slice(-2);",
									"frenchFormat = \"01/\" +  (\"0\"+(date1.getMonth()+1)).slice(-2) + \"/\" +date1.getFullYear() ;",
									"",
									"codeFormat = \"01\" +  (\"0\"+(date1.getMonth()+1)).slice(-2)  +date1.getFullYear() ;",
									"",
									"",
									"//tests[formated_date] = true;",
									"//tests[frenchFormat] = true;",
									"//tests[codeFormat] = true;",
									"pm.environment.set(\"frenchFormat\", frenchFormat);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"EOM_COMPUTE_COFI\",\n\n  \"customFields\" : {\n    \"customField\" : [ {\n      \"code\" : \"ScriptingJob_variables\",\n\n      \"mapValue\" : {\n        \"BA_CODE\" : {\"value\" : \"FREE\" },\n        \"FROM_DATE\" : {\"value\" : \"01/02/2020\"}\n        ,    \"ex\" :  {\"value\" : \"{{frenchFormat}}\"}\n      }\n    } ]\n  }\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/execute",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "fin cofi",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b4f7588c-97eb-4b3b-b433-9944b842b9cc",
								"exec": [
									"  tests[\"WAIT 10 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 10 seconds before request.\");",
									"  }, 10000);",
									"",
									"  "
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=EOM_COMPUTE_COFI",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "EOM_COMPUTE_COFI"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc pbs",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"S#FE_PM_02643_ADR_02643_GRAN_20180920\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields ;",
									"",
									"tests[\"No CF\" ] = cf ===undefined ;",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < 1; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-BLO-DU-LR5-NRO|02-113121|\"+ codeFormat   &&  si[pas].status === \"ACTIVE\") ",
									"",
									"   )",
									"    ;",
									"}",
									"",
									"//tests[frenchFormat] = true;",
									"//tests[codeFormat] = true;",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "4ef533d6-0bbb-44d4-a26b-d4d113cf5200",
								"exec": [
									"  tests[\"WAIT 10 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 10 second before request.\");",
									"  }, 10000);",
									"  ",
									"",
									"var date2=new Date(\"1995-12-17T03:24:00\");",
									"var date1=new Date();",
									"var formated_date = date1.getFullYear() + \"-\" + (\"0\"+(date1.getMonth()+1)).slice(-2) + \"-\" + (\"0\"+date1.getDate()).slice(-2);",
									"frenchFormat = \"01/\" +  (\"0\"+(date1.getMonth()+1)).slice(-2) + \"/\" +date1.getFullYear() ;",
									"",
									"codeFormat = \"01\" +  (\"0\"+(date1.getMonth()+1)).slice(-2)  +date1.getFullYear() ;",
									"",
									"",
									"//tests[formated_date] = true;",
									"//tests[frenchFormat] = true;",
									"//tests[codeFormat] = true;"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=S%23FE_PM_02643_ADR_02643_GRAN_20180920",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "S%23FE_PM_02643_ADR_02643_GRAN_20180920"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "INVOICING",
			"item": [
				{
					"name": "job invoice",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "64c31ed8-9501-4785-b95a-28cdbee93476",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"INVOICING\",\n\n  \"customFields\" : {\n    \"customField\" : [ {\n      \"code\" : \"ScriptingJob_variables\",\n\n      \"mapValue\" : {\n        \"BA_CODE\" : {\"value\" : \"FREE\" },\n        \"FROM_DATE\" : {\"value\" : \"01/02/2018\"}, \n        \"TO_DATE\" : {\"value\" : \"01/02/2021\"},\n        \"INVOICE_MODE\" : {\"value\" : \"proforma\"},\n        \"INVOICE_TEMPLATE_FOLDER\" : {\"value\" : \"/opt/jboss/opencelldata/template\"},\n        \"INVOICE_FOLDER\" : {\"value\" : \"/opt/jboss/opencelldata/invoices\"}\n        \n      }\n    } ]\n  }\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/execute",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "fin invoice",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b4f7588c-97eb-4b3b-b433-9944b842b9cc",
								"exec": [
									"  tests[\"WAIT 30 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 30 seconds before request.\");",
									"  }, 30000);",
									"",
									"  "
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=INVOICING",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "INVOICING"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "files",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "4ef533d6-0bbb-44d4-a26b-d4d113cf5200",
								"exec": [
									"var date2=new Date(\"1995-12-17T03:24:00\");",
									"var date1=new Date();",
									"var formated_date = date1.getFullYear() + \"-\" + (\"0\"+(date1.getMonth()+1)).slice(-2) + \"-\" + (\"0\"+date1.getDate()).slice(-2);",
									"frenchFormat = \"01/\" +  (\"0\"+(date1.getMonth()+1)).slice(-2) + \"/\" +date1.getFullYear() ;",
									"",
									"codeFormat = \"01\" +  (\"0\"+(date1.getMonth()+1)).slice(-2)  +date1.getFullYear() ;",
									"",
									"",
									"//tests[formated_date] = true;",
									"//tests[frenchFormat] = true;",
									"//tests[codeFormat] = true;"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/admin/files/all",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"admin",
								"files",
								"all"
							]
						}
					},
					"response": []
				},
				{
					"name": "invoice files",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"var f = jsonData.file;",
									"",
									"tests[\"3 invoices\"] = f.length === 4 ;",
									"",
									"for (let pas = 0; pas < 4; pas++) {",
									"    if (f[pas].name === \".empty\") {continue;}",
									"    tests[\"-----facture\" + pas + \" ok \" + f[pas].name ] = (",
									"    (f[pas].name.startsWith(\"PROFORMA_\") &&  ",
									"     f[pas].name.includes(\"ACCES_FREE_\") &&",
									"     f[pas].name.endsWith(\".xlsx\")",
									"     ) ",
									"     ||",
									"    (f[pas].name.startsWith(\"PROFORMA_\") &&  ",
									"     f[pas].name.includes(\"COLLECTE-NRO-ACTIVE_FREE_\") &&",
									"     f[pas].name.endsWith(\".xlsx\")",
									"     ) ",
									"     ||",
									"     (f[pas].name.startsWith(\"PROFORMA_\") &&  ",
									"     f[pas].name.includes(\"COFINANCEMENT_FREE_\") &&",
									"     f[pas].name.endsWith(\".xlsx\")",
									"     ) ",
									"   );    ",
									"   ",
									"",
									"    if (f[pas].name.includes(\"ACCES_FREE_\")) {",
									"        factuAcces = f[pas].name;    ",
									"    }",
									"    if (f[pas].name.includes(\"COLLECTE-NRO-ACTIVE_FREE_\")) {",
									"        factuCNROA = f[pas].name;    ",
									"    }",
									"    ",
									"    if (f[pas].name.includes(\"COFINANCEMENT_FREE_\")) {",
									"        factuCofi = f[pas].name;    ",
									"    }",
									"    ",
									"",
									"}",
									"",
									"    pm.environment.set(\"factuAcces\", factuAcces);",
									"    pm.environment.set(\"factuCNROA\", factuCNROA);",
									"    pm.environment.set(\"factuCofi\", factuCofi);",
									"    ",
									"     ",
									"     ",
									"    tests[\"factu cofi = \" +factuCofi] = true ;   ",
									"    tests[\"factu CNROA = \" +factuCNROA] = true ; ",
									"    tests[\"factu acces = \" +factuAcces] = true ;  ",
									"    ",
									"    ",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "4ef533d6-0bbb-44d4-a26b-d4d113cf5200",
								"exec": [
									"var date2=new Date(\"1995-12-17T03:24:00\");",
									"var date1=new Date();",
									"var formated_date = date1.getFullYear() + \"-\" + (\"0\"+(date1.getMonth()+1)).slice(-2) + \"-\" + (\"0\"+date1.getDate()).slice(-2);",
									"frenchFormat = \"01/\" +  (\"0\"+(date1.getMonth()+1)).slice(-2) + \"/\" +date1.getFullYear() ;",
									"",
									"codeFormat = \"01\" +  (\"0\"+(date1.getMonth()+1)).slice(-2)  +date1.getFullYear() ;",
									"",
									"",
									"//tests[formated_date] = true;",
									"//tests[frenchFormat] = true;",
									"//tests[codeFormat] = true;"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/admin/files?dir=invoices",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"admin",
								"files"
							],
							"query": [
								{
									"key": "dir",
									"value": "invoices"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "wallet operation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"totalNumberOfRecords = 5\"] = jsonData.paging.totalNumberOfRecords === 5;",
									"",
									"",
									"var wo = jsonData.walletOperations ;",
									"",
									"tests[\"5 WO\"] = wo.length === 5 ;",
									"",
									"for (let pas = 0; pas < 5; pas++) {",
									"    tests[\"-----WO\" + pas + \" ok \" + wo[pas].code ] = (",
									"        (wo[pas].code === \"COLL-NRO-ACCES-FAS\" ",
									"            &&  wo[pas].status === \"TREATED\"",
									"            && wo[pas].userAccount=== \"FREE-NPDC\"",
									"       )",
									"       ||",
									"           (wo[pas].code === \"COLL-NRO-LIV-FAS\" ",
									"            &&  wo[pas].status === \"TREATED\" ",
									"            && wo[pas].userAccount=== \"FREE-AXIONE\"",
									"       )",
									"       ||",
									"           (wo[pas].code === \"FTTHP-LOC-NRO\" ",
									"            &&  wo[pas].status === \"TREATED\"",
									"            && wo[pas].userAccount=== \"FREE-NPDC\"",
									"       )",
									"       ||",
									"           (wo[pas].code === \"FTTHP-RAB-OI-CRE\" ",
									"            &&  wo[pas].status === \"TREATED\"",
									"            && wo[pas].userAccount=== \"FREE-NPDC\"",
									"       )",
									"       ||",
									"           (wo[pas].code === \"FTTHP-BLO-DU-LR5-NRO\" ",
									"            &&  wo[pas].status === \"TREATED\" ",
									"            && wo[pas].userAccount=== \"FREE-NPDC\"",
									"       )",
									"   )",
									"    ;",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "4ef533d6-0bbb-44d4-a26b-d4d113cf5200",
								"exec": [
									"var date2=new Date(\"1995-12-17T03:24:00\");",
									"var date1=new Date();",
									"var formated_date = date1.getFullYear() + \"-\" + (\"0\"+(date1.getMonth()+1)).slice(-2) + \"-\" + (\"0\"+date1.getDate()).slice(-2);",
									"frenchFormat = \"01/\" +  (\"0\"+(date1.getMonth()+1)).slice(-2) + \"/\" +date1.getFullYear() ;",
									"",
									"codeFormat = \"01\" +  (\"0\"+(date1.getMonth()+1)).slice(-2)  +date1.getFullYear() ;",
									"",
									"",
									"//tests[formated_date] = true;",
									"//tests[frenchFormat] = true;",
									"//tests[codeFormat] = true;"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/wallet/operation/list",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"wallet",
								"operation",
								"list"
							]
						}
					},
					"response": []
				},
				{
					"name": "rated transaction",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"totalNumberOfRecords = 5\"] = jsonData.paging.totalNumberOfRecords === 5;",
									"",
									"",
									"var wo = jsonData.walletOperations ;",
									"",
									"tests[\"5 WO\"] = wo.length === 5 ;",
									"",
									"for (let pas = 0; pas < 5; pas++) {",
									"    tests[\"-----WO\" + pas + \" ok \" + wo[pas].code ] = (",
									"        (wo[pas].code === \"COLL-NRO-ACCES-FAS\" ",
									"            &&  wo[pas].status === \"TREATED\"",
									"            && wo[pas].userAccount=== \"FREE-NPDC\"",
									"       )",
									"       ||",
									"           (wo[pas].code === \"COLL-NRO-LIV-FAS\" ",
									"            &&  wo[pas].status === \"TREATED\" ",
									"            && wo[pas].userAccount=== \"FREE-AXIONE\"",
									"       )",
									"       ||",
									"           (wo[pas].code === \"FTTHP-LOC-NRO\" ",
									"            &&  wo[pas].status === \"TREATED\"",
									"            && wo[pas].userAccount=== \"FREE-NPDC\"",
									"       )",
									"       ||",
									"           (wo[pas].code === \"FTTHP-RAB-OI-CRE\" ",
									"            &&  wo[pas].status === \"TREATED\"",
									"            && wo[pas].userAccount=== \"FREE-NPDC\"",
									"       )",
									"       ||",
									"           (wo[pas].code === \"FTTHP-BLO-DU-LR5-NRO\" ",
									"            &&  wo[pas].status === \"TREATED\" ",
									"            && wo[pas].userAccount=== \"FREE-NPDC\"",
									"       )",
									"   )",
									"    ;",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "4ef533d6-0bbb-44d4-a26b-d4d113cf5200",
								"exec": [
									"var date2=new Date(\"1995-12-17T03:24:00\");",
									"var date1=new Date();",
									"var formated_date = date1.getFullYear() + \"-\" + (\"0\"+(date1.getMonth()+1)).slice(-2) + \"-\" + (\"0\"+date1.getDate()).slice(-2);",
									"frenchFormat = \"01/\" +  (\"0\"+(date1.getMonth()+1)).slice(-2) + \"/\" +date1.getFullYear() ;",
									"",
									"codeFormat = \"01\" +  (\"0\"+(date1.getMonth()+1)).slice(-2)  +date1.getFullYear() ;",
									"",
									"",
									"//tests[formated_date] = true;",
									"//tests[frenchFormat] = true;",
									"//tests[codeFormat] = true;"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "\n"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/wallet/operation/list",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"wallet",
								"operation",
								"list"
							]
						}
					},
					"response": []
				},
				{
					"name": "job invoice reel",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "64c31ed8-9501-4785-b95a-28cdbee93476",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"INVOICING\",\n\n  \"customFields\" : {\n    \"customField\" : [ {\n      \"code\" : \"ScriptingJob_variables\",\n\n      \"mapValue\" : {\n        \"BA_CODE\" : {\"value\" : \"FREE\" },\n        \"FROM_DATE\" : {\"value\" : \"01/02/2018\"}, \n        \"TO_DATE\" : {\"value\" : \"01/02/2021\"},\n        \"INVOICE_MODE\" : {\"value\" : \"reel\"},\n        \"INVOICE_TEMPLATE_FOLDER\" : {\"value\" : \"/opt/jboss/opencelldata/template\"},\n        \"INVOICE_FOLDER\" : {\"value\" : \"/opt/jboss/opencelldata/invoices\"}\n        \n      }\n    } ]\n  }\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/execute",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "fin invoice reel",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b4f7588c-97eb-4b3b-b433-9944b842b9cc",
								"exec": [
									"  tests[\"WAIT 30 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 30 seconds before request.\");",
									"  }, 30000);",
									"",
									"  "
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=INVOICING",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "INVOICING"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "invoice files reel",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"var f = jsonData.file;",
									"",
									"//tests[\"3 invoices\"] = f.length === 3 ;",
									"",
									"for (let pas = 0; pas < f.length; pas++) {",
									"    if (f[pas].name === \".empty\") {continue;}",
									"    if ( f[pas].name.startsWith(\"PROFORMA_\")) {continue;}",
									"    tests[\"-----facture\" + pas + \" ok \" + f[pas].name ] = (",
									"    ( ! f[pas].name.startsWith(\"PROFORMA_\") &&  ",
									"     f[pas].name.includes(\"ACCES_FREE_\") &&",
									"     f[pas].name.endsWith(\".xlsx\")",
									"     ) ",
									"     ||",
									"    ( ! f[pas].name.startsWith(\"PROFORMA_\") &&  ",
									"     f[pas].name.includes(\"COLLECTE-NRO-ACTIVE_FREE_\") &&",
									"     f[pas].name.endsWith(\".xlsx\")",
									"     ) ",
									"     ||",
									"     (! f[pas].name.startsWith(\"PROFORMA_\") &&  ",
									"     f[pas].name.includes(\"COFINANCEMENT_FREE_\") &&",
									"     f[pas].name.endsWith(\".xlsx\")",
									"     ) ",
									"   );    ",
									"   ",
									"",
									"    if (! f[pas].name.startsWith(\"PROFORMA_\") && f[pas].name.includes(\"ACCES_FREE_\")) {",
									"        factuAccesReel = f[pas].name;    ",
									"    }",
									"    if (! f[pas].name.startsWith(\"PROFORMA_\") &&f[pas].name.includes(\"COLLECTE-NRO-ACTIVE_FREE_\")) {",
									"        factuCNROAReel = f[pas].name;    ",
									"    }",
									"    ",
									"    if (! f[pas].name.startsWith(\"PROFORMA_\") &&f[pas].name.includes(\"COFINANCEMENT_FREE_\")) {",
									"        factuCofiReel = f[pas].name;    ",
									"    }",
									"    ",
									"",
									"}",
									"",
									"    pm.environment.set(\"factuAcces\", factuAcces);",
									"    pm.environment.set(\"factuCNROA\", factuCNROA);",
									"    pm.environment.set(\"factuCofi\", factuCofi);",
									"    ",
									"     ",
									"     ",
									"    tests[\"factu cofi = \" +factuCofi] = true ;   ",
									"    tests[\"factu CNROA = \" +factuCNROA] = true ; ",
									"    tests[\"factu acces = \" +factuAcces] = true ;  ",
									"    ",
									"    ",
									"",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "4ef533d6-0bbb-44d4-a26b-d4d113cf5200",
								"exec": [
									"var date2=new Date(\"1995-12-17T03:24:00\");",
									"var date1=new Date();",
									"var formated_date = date1.getFullYear() + \"-\" + (\"0\"+(date1.getMonth()+1)).slice(-2) + \"-\" + (\"0\"+date1.getDate()).slice(-2);",
									"frenchFormat = \"01/\" +  (\"0\"+(date1.getMonth()+1)).slice(-2) + \"/\" +date1.getFullYear() ;",
									"",
									"codeFormat = \"01\" +  (\"0\"+(date1.getMonth()+1)).slice(-2)  +date1.getFullYear() ;",
									"",
									"",
									"//tests[formated_date] = true;",
									"//tests[frenchFormat] = true;",
									"//tests[codeFormat] = true;"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/admin/files?dir=invoices",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"admin",
								"files"
							],
							"query": [
								{
									"key": "dir",
									"value": "invoices"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "pebroc 2.9",
			"item": [
				{
					"name": "create tronc",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"OSEN\",\n  \"objectType\" : \"Prise_de_Commande__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"xFREE-TRONC-20172947\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"AXIONE\",\n  \"chargeCode\" : \"COLL-NRO-LIV-FAS\",\n  \"quantity\" : 1,\n  \"uid\" : \"a0G0Q000004aFiOUAU\",\n  \"origine\" : \"TRONC\",\n  \"eventDate\" : \"2020-02-04T11:23:20\",\n  \"details\" : {\n    \"dateResiliation\" : null,\n    \"portLivraison\" : null,\n    \"idCharlieNRO\" : null,\n    \"prixVenteManuel\" : null,\n    \"dateMES\" : null,\n    \"produitCommande\" : \"PDC172946\",\n    \"typeTronc\" : \"FTTH-VLAN\",\n    \"prixVenteMensuel\" : null,\n    \"motifModif\" : null,\n    \"prixCatalogue\" : null,\n    \"villeNRO\" : null,\n    \"debit\" : \"10 Gbits\",\n    \"codePostalNRO\" : null,\n    \"dateModification\" : null,\n    \"techno\" : \"Tronc\",\n    \"referenceNRO\" : null,\n    \"numeroCommande\" : \"PDC172946\",\n    \"referenceCommerciale\" : \"FREE-TRONC-20172947\",\n    \"commande\" : \"PDC172946\",\n    \"referenceClient\" : \"free\",\n    \"prixTotal\" : null,\n    \"referenceTechnique\" : \"Free\",\n    \"portLivraisonSecurisation\" : null,\n    \"dateDebutFacturation\" : \"2020-01-23T01:00:00\",\n    \"dateOperation\" : \"2020-02-04T11:23:20\",\n    \"statut\" : null,\n    \"referenceTRONC\" : \"FREE-TRONC-20172947\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.osen.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.osen.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getTronc",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"TRONC#xFREE-TRONC-20172947\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-AXIONE\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"3 CF sur la ssc\"] = cf.length === 3 ;",
									"",
									"for (let pas = 0; pas < 3; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_REF_TRONC\"   &&  cf[pas].stringValue === \"FREE-TRONC-20172947\")   ",
									"    || (cf[pas].code === \"CF_SUB_TYPE\"  &&  cf[pas].stringValue === \"X\")     ",
									"    || (cf[pas].code === \"CF_SUB_DEBIT\"  && cf[pas].doubleValue === 10240))",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < 1; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"COLL-NRO-LIV-FAS\"   &&  si[pas].status === \"TERMINATED\")   ",
									"   )",
									"    ;",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "2396d15f-7dc5-4625-918c-1d03c9ae7a1f",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=TRONC%23xFREE-TRONC-20172947",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "TRONC%23xFREE-TRONC-20172947"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create cnroa",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"OSEN\",\n  \"objectType\" : \"Prise_de_Commande__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"FREE-CNROA-20172957\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n  \"chargeCode\" : \"COLL-NRO-ACCES-FAS\",\n  \"quantity\" : 1,\n  \"uid\" : \"a0G0Q000004aNL5UAM\",\n  \"origine\" : \"CNROA\",\n  \"eventDate\" : \"2020-01-21T11:12:57\",\n  \"details\" : {\n    \"dateResiliation\" : null,\n    \"dateMad\" : \"2020-01-21T01:00:00\",\n    \"dateModification\" : null,\n    \"idCharlieNRO\" : 424.0,\n    \"techno\" : \"CNROA\",\n    \"referenceNRO\" : \"SHL_02738_HERO\",\n    \"dateMes\" : \"2020-01-21T01:00:00\",\n    \"numeroCommande\" : \"PDC172956\",\n    \"referenceCommerciale\" : \"FREE-CNROA-20172957\",\n    \"dateFinEngagement\" : null,\n    \"commande\" : \"PDC172956\",\n    \"produitCommande\" : \"PDC172956\",\n    \"referenceClient\" : \"free\",\n    \"typeLivraison\" : \"Régional\",\n    \"referenceTRONC\" : \"FREE-TRONC-20172947\",\n    \"referenceTechnique\" : \"SHL_02738_HERO\",\n    \"dateDebutFacturation\" : \"2020-01-21T01:00:00\",\n    \"villeNRO\" : \"TERGNIER\",\n    \"debit\" : \"10 Gbits\",\n    \"dateOperation\" : \"2020-01-21T11:12:57\",\n    \"codePostalNRO\" : \"02700\",\n    \"statut\" : \"Actif\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.osen.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.osen.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getCnroa",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"CNROA#FREE-CNROA-20172957\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"5 CF sur la ssc\"] = cf.length === 5 ;",
									"",
									"for (let pas = 0; pas < 5; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_REF_TRONC\"   &&  cf[pas].stringValue === \"FREE-TRONC-20172947\")   ",
									"    || (cf[pas].code === \"CF_SUB_REF_NRO\"  &&  cf[pas].stringValue === \"SHL_02738_HERO\")     ",
									"    || (cf[pas].code === \"CF_SUB_DEBIT\"  && cf[pas].doubleValue === 10240))",
									"    || (cf[pas].code === \"CF_SUB_TYPE_LIVRAISON\"  &&  cf[pas].stringValue === \"Régional\")   ",
									"    || (cf[pas].code === \"CF_SUB_TYPE\"  &&  cf[pas].stringValue === \"Y\")   ",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < 1; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"COLL-NRO-ACCES-FAS\"   &&  si[pas].status === \"TERMINATED\")   ",
									"   )",
									"    ;",
									"}",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "ae862586-04b9-4747-90ad-12e9a92f7487",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=CNROA%23FREE-CNROA-20172957",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "CNROA%23FREE-CNROA-20172957"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create acces",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"ACCES\",\n  \"objectType\" : \"CommandeAccesFTTH_V2__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"xFREE-FTTH-501754\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n  \"chargeCode\" : \"ACCES_FTTH\",\n  \"quantity\" : 1,\n  \"uid\" : \"a1n0Q000000Bg7AQAS\",\n  \"origine\" : \"ACCES\",\n  \"eventDate\" : \"2020-02-05T15:31:39\",\n  \"details\" : {\n    \"referencePM\" : \"ADR_62322_PRI9\",\n    \"dateResiliation\" : null,\n    \"commune\" : \"BILLERE\",\n    \"churn\" : false,\n    \"dateMes\" : \"2019-10-03T16:00:00\",\n    \"identifiantImmeuble\" : \"IMM64-497250\",\n    \"statutRouteOptique\" : \"OK\",\n    \"operateurPrecedent\" : null,\n    \"ordreRouteOptique\" : \"CONFIRMATION\",\n    \"statutService\" : \"Activée\",\n    \"idService\" : \"SERV-0107049\",\n    \"etatMAD\" : \"OK\",\n    \"typeCommandeRetenue\" : \"COFI\",\n    \"referencePrestationPrise\" : \"FREE-FTTH-501754\",\n    \"codeMotifEchecMAD\" : null,\n    \"typeRaccordement\" : \"STOC\",\n    \"codeAdresse\" : \"64129222C4\",\n    \"dateAnnulation\" : null,\n    \"referencePTO\" : \"SPTH-HUTT-0121\",\n    \"codePostal\" : \"64140\",\n    \"referenceNRO\" : \"SHL_62865_VITR\",\n    \"commande\" : \"THD0000022768\",\n    \"motifEchecCR\" : null,\n    \"motifEchecAR\" : null,\n    \"causeReprovisioning\" : null,\n    \"refCommandePriseInterne\" : \"ADR_STOC_20191017_4\",\n    \"priseExistante\" : true,\n    \"dateDebutFacturation\" : \"2019-10-17T15:53:24\",\n    \"typeChurn\" : null,\n    \"modeStoc\" : false,\n    \"etatCR\" : \"OK\",\n    \"etatAR\" : \"OK\",\n    \"typeRouteOptique\" : \"TDC64-HUTT1-ACCES-B\",\n    \"dateOperation\" : \"2020-02-05T15:31:39\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.acces.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.acces.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#xFREE-FTTH-501754\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"CREATED\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_62322_PRI9\" ",
									";",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length ; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")   ",
									"   )",
									"    ;",
									"}",
									"",
									"var cf = jsonData.subscription.services.serviceInstance[0].customFields.customField ;",
									"",
									"tests[\"8 CF sur le SI\"] = cf.length === 8;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    cf[pas].code === \"CF_SRV_TOTAL_PRICE\"     ",
									"    || cf[pas].code === \"CF_SRV_QUANTITY\"     ",
									"    || (cf[pas].code === \"CF_SRV_NB_BRASSAGE\"  && cf[pas].doubleValue === 1)",
									"    || cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" ",
									"    || cf[pas].code === \"CF_SRV_INVOICE_DATA\"     ",
									"    || cf[pas].code === \"CF_SRV_UNIT_PRICE\"    ",
									"    || cf[pas].code === \"CF_SRV_DEAL_NAME\" ",
									"    || cf[pas].code === \"CF_SRV_DATE_MES\")",
									"    ;",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "1150a1e4-6e0c-4cb4-8a0c-714e6790a5c2",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23xFREE-FTTH-501754",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23xFREE-FTTH-501754"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "JDD1",
			"item": [
				{
					"name": "create tronc",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n \"source\" : \"OSEN\",\n \"objectType\" : \"Prise_de_Commande__c\",\n \"operation\" : \"CREATION\",\n \"access\" : \"FREE-TRONC-191722\",\n\"origine\" : \"TRONC\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"AXIONE\",\n  \"chargeCode\" : \"COLL-NRO-LIV-FAS\",\n  \"uid\" : \"a0G0Q000003qAuAUAU\",\n \"quantity\" : 1,\n \"eventDate\" : \"2019-07-04T10:50:34\",\n \"details\" : {\n \"nombreBrassage\" : 1.0,\n \"referenceTRONC\" : \"tronc1\",\n \"dateResiliation\" : null,\n \"debit\" : \"10 Gbits\",\n  \"portLivraison\" : \"a1E0Q000000ZqXwUAK\",\n  \"dateModification\" : null,\n \"techno\" : \"Tronc\",\n \"prixVenteManuel\" : null,\n  \"referenceNRO\" : \"SHL_59011_ANNO\",\n  \"dateMES\" : \"2019-06-25T02:00:00\",\n \"numeroCommande\" : \"PDC172801\",\n \"referenceCommerciale\" : \"FREE-TRONC-19172802\",\n  \"referenceClient\" : \"FREE\",\n  \"prixTotal\" : null,\n \"referenceTechnique\" : \"FREE\",\n \"portLivraisonSecurisation\" : \"a1E0Q000000ZqGJUA0\",\n  \"dateDebutFacturation\" : \"2019-06-25T02:00:00\",\n  \"typeTronc\" : \"FTTH-VLAN\",\n \"prixVenteMensuel\" : 123.12,\n \"motifModif\" : null,\n  \"prixCatalogue\" : null,\n  \"commande\" : \"PDC-XYZ\",\n \"villeNRO\" : \"ANNOUELLIN\",\n \"dateOperation\" : \"2019-07-04T10:50:34\",\n  \"codePostalNRO\" : \"59112\",\n  \"statut\" : \"Actif\"\n }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.osen.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.osen.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getTronc",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"TRONC#FREE-TRONC-191722\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-AXIONE\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"3 CF sur la ssc\"] = cf.length === 3 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_REF_TRONC\"   &&  cf[pas].stringValue === \"tronc1\")   ",
									"    || (cf[pas].code === \"CF_SUB_TYPE\"  &&  cf[pas].stringValue === \"X\")     ",
									"    || (cf[pas].code === \"CF_SUB_DEBIT\"  && cf[pas].doubleValue === 10240))",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas <si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"COLL-NRO-LIV-FAS\"   &&  si[pas].status === \"TERMINATED\")   ",
									"   )",
									"    ;",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "566ef4c9-08e7-437a-91cd-07c4bae402d8",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=TRONC%23FREE-TRONC-191722",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "TRONC%23FREE-TRONC-191722"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create cnroa",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n \"source\" : \"OSEN\",\n \"objectType\" : \"Prise_de_Commande__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"FREE-CNROA-19172803\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n\"origine\" : \"CNROA\",\n \"chargeCode\" : \"COLL-NRO-ACCES-FAS\",\n \"uid\" : \"a0G0Q000003qBbuUAE\",\n \"quantity\" : 1.0,\n \"eventDate\" : \"2019-07-05T09:55:00\",\n  \"details\" : {\n  \"nombreBrassage\" : 1.0,\n  \"commande\" : \"PDC-XYZ\",\n  \"referenceNRO\" : \"SHL_02564_NOYA3\",\n  \"idCharlieNRO\" : 512.0,\n  \"debit\" : \"10 Gbits\",\n \"referenceTRONC\" : \"tronc1\",\n \"typeLivraison\" : \"Régional\",\n \"dateResiliation\" : null,\n  \"dateModification\" : null,\n  \"techno\" : \"CNROA\",\n \"numeroCommande\" : \"PDC172802\",\n \"dateMES\" : \"2019-06-26T02:00:00\",\n  \"referenceCommerciale\" : \"FREE-CNROA-19172803\",\n  \"referenceClient\" : \"FREE\",\n \"referenceTechnique\" : \"SHL_59449_ORCH\",\n \"dateDebutFacturation\" : \"2019-06-26T02:00:00\",\n  \"villeNRO\" : \"ORCHIES\",\n  \"dateOperation\" : \"2019-07-03T09:55:00\",\n \"codePostalNRO\" : \"59310\",\n \"statut\" : \"Actif\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.osen.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.osen.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getCnroa",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"CNROA#FREE-CNROA-19172803\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"5 CF sur la ssc\"] = cf.length === 5 ;",
									"",
									"for (let pas = 0; pas < 5; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_REF_TRONC\"   &&  cf[pas].stringValue === \"tronc1\")   ",
									"    || (cf[pas].code === \"CF_SUB_REF_NRO\"  &&  cf[pas].stringValue === \"SHL_02564_NOYA3\")     ",
									"    || (cf[pas].code === \"CF_SUB_DEBIT\"  && cf[pas].doubleValue === 10240))",
									"    || (cf[pas].code === \"CF_SUB_TYPE_LIVRAISON\"  &&  cf[pas].stringValue === \"Régional\")   ",
									"    || (cf[pas].code === \"CF_SUB_TYPE\"  &&  cf[pas].stringValue === \"Y\")   ",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < 1; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"COLL-NRO-ACCES-FAS\"   &&  si[pas].status === \"TERMINATED\")   ",
									"   )",
									"    ;",
									"}",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "f876bba4-9d6d-4994-82fd-a3fe0c9adf9d",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=CNROA%23FREE-CNROA-19172803",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "CNROA%23FREE-CNROA-19172803"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create PM/NRO",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"id\" : 5879,\n  \"nro\" : {\n \"id\" : 415,\n \"nomOi\" : \"NPDC\",\n  \"ville\" : \"NOYANT ET ACONIN\",\n  \"codeOi\" : \"NPDC\",\n \"adresse\" : \"RUE DE LA PLACE\",\n \"codeInsee\" : \"02564\",\n  \"popUsager\" : false,\n  \"codePostal\" : \"02200\",\n \"referenceNro\" : \"SHL_02564_NOYA3\",\n \"dateNroDeploye\" : \"2018-03-21\"\n  },\n  \"ville\" : \"ROZIERES SUR CRISE\",\n  \"adresse\" : \"1 RUE DE LIEVAL\",\n  \"etatPmr\" : \"DEPLOYE\",\n \"codeInsee\" : \"02663\",\n \"codePostal\" : \"02200\",\n \"pmrMultiPmt\" : false,\n \"referencePmr\" : \"ADR_02154_LIEV\",\n  \"etatLienPmNro\" : \"DEPLOYE\",\n  \"referencePmrNro\" : \"CPN_ADR_02154_LIEV_SHL_02564_NOYA3\",\n  \"capaciteMaxPmIpe\" : 520,\n  \"baieTransportPrdm\" : \"RTO_02564_NOYA_Baie2\",\n \"longueurLienPmPrdm\" : 5.29,\n \"dateMAD\": \"2018-09-20T15:50:49.919\"\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.charlie.pmr.v2%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.charlie.pmr.v2%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc nro",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"N#SHL_02564_NOYA3|415\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"1 CF sur la ssc\"] = cf.length === 1 ;",
									"",
									"for (let pas = 0; pas < 1; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"        (cf[pas].code === \"CF_SUB_INFO\"  )     ",
									"    )",
									"    ;",
									"}",
									"",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b950a793-d94f-4234-95ca-cf8011fe4b45",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=N%23SHL_02564_NOYA3|415",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "N%23SHL_02564_NOYA3|415"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc pm",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"P#ADR_02154_LIEV|5879\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"3 CF sur la ssc\"] = cf.length === 3 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_NRO_SUB\"   &&  cf[pas].stringValue === \"N#SHL_02564_NOYA3|415\")   ",
									"   ||",
									"   (cf[pas].code === \"CF_SUB_ETAT_PM\"   &&  cf[pas].stringValue === \"DEPLOYE\")   ",
									"   ||",
									"   (cf[pas].code === \"CF_SUB_INFO\"   )   ",
									"",
									"   ",
									"    )",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=P%23ADR_02154_LIEV|5879",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "P%23ADR_02154_LIEV|5879"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create acces 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"ACCES\",\n  \"objectType\" : \"CommandeAccesFTTH_V2__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"NR-ACCESS-1411001\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n\"origine\" : \"ACCES\",\n  \"chargeCode\" : \"ACCES_FTTH\",\n  \"uid\" : \"a1n0Q0000000Z6vQAE\",\n  \"quantity\" : 1,\n  \"eventDate\" : \"2019-01-17T17:06:37\",\n  \"details\" : {\n  \"nombreBrassage\" : 1.0,\n \"commande\" : \"PDC-XYZ\",\n \"referenceTechnique\" : \"creation\",\n \"referencePM\" : \"ADR_02154_LIEV\",\n \"idPM\" : \"141\",\n \"dateResiliation\" : null,\n \"commune\" : \"WANNEHAIN\",\n \"churn\" : true,\n \"dateMes\" : \"2019-06-05T16:00:00\",\n \"dateMAD\" : \"2019-06-05T16:00:00\",\n \"identifiantImmeuble\" : null,\n \"dateInstallation\" : \"2018-09-11T12:07:02\",\n \"statutRouteOptique\" : \"OK\",\n \"operateurPrecedent\" : \"FREE\",\n \"ordreRouteOptique\" : \"CONFIRMATION\",\n \"statutService\" : \"Activée\",\n \"idService\" : \"SERV-0013441\",\n \"etatMAD\" : \"OK\",\n \"typeCommandeRetenue\" : \"COFI\",\n \"referencePrestationPrise\" : \"FREE-FTTH-600220\",\n \"codeMotifEchecMAD\" : null,\n \"typeRaccordement\" : \"STOC\",\n \"codeAdresse\" : \"596382226X\",\n \"dateAnnulation\" : null,\n \"referencePTO\" : \"NP-ECO1-0149\",\n \"codePostal\" : \"59830\",\n \"referenceNRO\" : \"SHL_59449_ORCH\",\n \"idNRO\" : \"nro1\",\n \"referenceTRONC\" : \"trc1\",\n \"idLM\" : \"1\",\n \"motifEchecCR\" : null,\n \"motifEchecAR\" : null,\n \"causeReprovisioning\" : null,\n \"refCommandePriseInterne\" : \"FOU_PEBROC_20180912_56\",\n \"priseExistante\" : true,\n \"dateDebutFacturation\" : \"2019-06-02T14:58:14\",\n \"dateFinEngagement\" : \"2019-09-11T00:00:00\",\n \"dureeEngagement\" : \"12\",\n \"typeChurn\" : \"ChurnPassifPassif\",\n \"modeStoc\" : false,\n \"etatCR\" : \"OK\",\n \"etatAR\" : \"OK\",\n \"typeRouteOptique\" : \"TDC_ACCES_ECO1_02_MOD05\",\n \"dateOperation\" : \"2019-01-17T17:06:37\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.acces.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.acces.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#NR-ACCESS-1411001\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status CREATED\"] = jsonData.subscription.status === \"CREATED\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_02154_LIEV\" ",
									";",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")   ",
									"   ||",
									"   (si[pas].code === \"FTTHP-LOC-NRO_2019-06-01\"   &&  si[pas].status === \"TERMINATED\")   ",
									"   ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let spas = 0 ; spas < si.length; spas++) {",
									"    var cf = jsonData.subscription.services.serviceInstance[spas].customFields.customField ;",
									"    tests[\"-----CF on SI\" + spas + \":\" + si[spas].code + \"=\" + cf.length] =",
									"            (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf.length === 8  ) ",
									"            ||",
									"            (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" &&  cf.length === 4  ) ",
									"            ;",
									"    //tests[\"8 CF sur \"] = cf.length === 8;",
									"    ",
									"    for (let pas = 0; pas < cf.length; pas++) {",
									"        tests[\"----------CF\" + pas + \" ok \" + cf[pas].code + \" on \" + si[spas].code ] = (",
									"           (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" ) ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\")    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        )",
									"        ;",
									"    }",
									"}",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "94be1094-456c-42ff-a3bd-4390ba2452cc",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23NR-ACCESS-1411001",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23NR-ACCESS-1411001"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create acces 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"ACCES\",\n  \"objectType\" : \"CommandeAccesFTTH_V2__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"NBBRA-ACCESS-1411001\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n\"origine\" : \"ACCES\",\n  \"chargeCode\" : \"ACCES_FTTH\",\n  \"uid\" : \"a1n0Q0000000Z6vQAE\",\n  \"quantity\" : 1,\n  \"eventDate\" : \"2019-01-17T17:06:37\",\n  \"details\" : {\n  \"nombreBrassage\" : 2.0,\n \"commande\" : \"PDC-XYZ\",\n \"referenceTechnique\" : \"creation\",\n \"referencePM\" : \"ADR_02154_LIEV\",\n \"idPM\" : \"141\",\n \"dateResiliation\" : null,\n \"commune\" : \"WANNEHAIN\",\n \"churn\" : true,\n \"dateMes\" : \"2019-06-05T16:00:00\",\n \"dateMAD\" : \"2019-06-05T16:00:00\",\n \"identifiantImmeuble\" : null,\n \"dateInstallation\" : \"2018-09-11T12:07:02\",\n \"statutRouteOptique\" : \"OK\",\n \"operateurPrecedent\" : \"FREE\",\n \"ordreRouteOptique\" : \"CONFIRMATION\",\n \"statutService\" : \"Activée\",\n \"idService\" : \"SERV-0013441\",\n \"etatMAD\" : \"OK\",\n \"typeCommandeRetenue\" : \"COFI\",\n \"referencePrestationPrise\" : \"FREE-FTTH-600220\",\n \"codeMotifEchecMAD\" : null,\n \"typeRaccordement\" : \"STOC\",\n \"codeAdresse\" : \"596382226X\",\n \"dateAnnulation\" : null,\n \"referencePTO\" : \"NP-ECO1-0149\",\n \"codePostal\" : \"59830\",\n \"referenceNRO\" : \"SHL_59449_ORCH\",\n \"idNRO\" : \"nro1\",\n \"referenceTRONC\" : \"trc1\",\n \"idLM\" : \"1\",\n \"motifEchecCR\" : null,\n \"motifEchecAR\" : null,\n \"causeReprovisioning\" : null,\n \"refCommandePriseInterne\" : \"FOU_PEBROC_20180912_56\",\n \"priseExistante\" : true,\n \"dateDebutFacturation\" : \"2019-06-02T14:58:14\",\n \"dateFinEngagement\" : \"2019-09-11T00:00:00\",\n \"dureeEngagement\" : \"12\",\n \"typeChurn\" : \"ChurnPassifPassif\",\n \"modeStoc\" : false,\n \"etatCR\" : \"OK\",\n \"etatAR\" : \"OK\",\n \"typeRouteOptique\" : \"TDC_ACCES_ECO1_02_MOD05\",\n \"dateOperation\" : \"2019-01-17T17:06:37\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.acces.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.acces.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#NBBRA-ACCESS-1411001\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"CREATED\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_02154_LIEV\" ",
									";",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"2 SI sur la ssc\"] = si.length === 2 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-LOC-NRO_2019-06-01\"   &&  si[pas].status === \"TERMINATED\")  ",
									"    || (si[pas].code === \"FTTHP-RAB-OI-BRS\"   &&  si[pas].status === \"INACTIVE\")  ",
									"    || (si[pas].code === \"FTTHP-RAB-FRT\"   &&  si[pas].status === \"INACTIVE\")  ",
									"    ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let spas = 0 ; spas < si.length; spas++) {",
									"    var cf = jsonData.subscription.services.serviceInstance[spas].customFields.customField ;",
									"    tests[\"-----CF on SI\" + spas + \":\" + si[spas].code + \"=\" + cf.length] =",
									"            (si[spas].code ===  \"FTTHP-RAB-OI-BRS\" && cf.length === 8  ) ",
									"            ||",
									"            (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" &&  cf.length === 4  ) ",
									"            ||",
									"             (si[spas].code ===  \"FTTHP-RAB-FRT\" && cf.length === 8  ) ",
									"            ",
									"            ;",
									"    //tests[\"8 CF sur \"] = cf.length === 8;",
									"    ",
									"    for (let pas = 0; pas < cf.length; pas++) {",
									"        tests[\"----------CF\" + pas + \" ok \" + cf[pas].code + \" on \" + si[spas].code ] = (",
									"           (si[spas].code ===  \"FTTHP-RAB-FRT\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" ) ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FRT\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FRT\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 2)",
									"        || (si[spas].code ===  \"FTTHP-RAB-FRT\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FRT\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FRT\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\")    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FRT\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FRT\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-BRS\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-BRS\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-BRS\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-BRS\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-BRS\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 2)",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-BRS\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-BRS\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-BRS\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        )",
									"        ;",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "fdda2fd1-c641-43d8-a419-4c192e76abe9",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23NBBRA-ACCESS-1411001",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23NBBRA-ACCESS-1411001"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create cacti",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"CACTI\",\n  \"objectType\" : \"Conso\",\n  \"operation\" : \"MODIFCATION\",\n \"access\" : \"FREE-TRONC-191722\",\n \"oc\" : \"FREE\",\n \"oi\" : \"NPDC\",\n\"origine\" : \"TRONC\",\n \"chargeCode\" : \"COL-NRO-LIV-ABO\",\n  \"uid\" : \"cacti#20180131#BOUY-CNROA-17137598\",\n  \"quantity\" : 5,\n  \"eventDate\" : \"2019-06-31T00:00:00\",\n  \"details\" : {\n \"nombreBrassage\" : 1.0,\n \"commande\" : \"PDC-XYZ\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.cacti.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.cacti.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "valid cacti",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"TRONC#FREE-TRONC-191722\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-AXIONE\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"4 CF sur la ssc\"] = cf.length === 4 ;",
									"",
									"for (let pas = 0; pas < 4; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_REF_TRONC\"   &&  cf[pas].stringValue === \"tronc1\")   ",
									"    || (cf[pas].code === \"CF_SUB_TYPE\"  &&  cf[pas].stringValue === \"X\")     ",
									"    || (cf[pas].code === \"CF_SUB_DEBIT\"  && cf[pas].doubleValue === 10240)",
									"    || (cf[pas].code === \"CF_SUB_TRONC_USAGE\"  && cf[pas].mapValue[\"01/06/2019\"].value === \"5.0|0|0|0\")",
									"    )",
									"    ;",
									"}",
									"",
									"",
									"",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < 1; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"COLL-NRO-LIV-FAS\"   &&  si[pas].status === \"TERMINATED\")   ",
									"   )",
									"    ;",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "38371efd-14ef-4171-81bb-9d708940c4af",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=TRONC%23FREE-TRONC-191722",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "TRONC%23FREE-TRONC-191722"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create cofi",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n \"oc\": \"FREE\",\n \"oi\": \"NPDC\",\n \"refPmr\": \"ADR_02154_LIEV\",\n \"dateMadPmr\": \"20/09/2018\",\n \"refZoneCofi\": \"NTHD16\",\n \"codeInseePmr\": \"02643\",\n \"typeIngenierie\": \"Mono\",\n \"batiments\": [\n {\n  \"idBatiment\": \"02-113121\",\n \"refPrestPbs\": \"FE_PM_02643_ADR_02643_GRAN_20180920\",\n  \"nbTotalLgtBat\": 1,\n \"dateCablageBatiment\": \"20/09/2018\"\n  },\n {\n  \"idBatiment\": \"02-113202\",\n \"refPrestPbs\": \"FE_PM_02643_ADR_02643_GRAN_20180920\",\n  \"nbTotalLgtBat\": 1,\n \"dateCablageBatiment\": \"20/09/2018\"\n  },\n {\n  \"idBatiment\": \"02-113004\",\n \"refPrestPbs\": \"FE_PM_02643_ADR_02643_GRAN_20180920\",\n  \"nbTotalLgtBat\": 1,\n \"dateCablageBatiment\": \"20/09/2018\"\n  }\n ]\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.charlie.factu.cofi.v1%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.charlie.factu.cofi.v1%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc bat 1",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"B#NTHD16|02-113121\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"4 CF sur la ssc\"] = cf.length === 4 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"        (cf[pas].code === \"CF_SUB_REF_PM\"  &&  cf[pas].stringValue === \"ADR_02154_LIEV\")     ",
									"    ||  (cf[pas].code === \"CF_SUB_NB_LGT\"  && cf[pas].longValue === 1)",
									"    ||  (cf[pas].code === \"CF_SUB_PBS\"  && cf[pas].mapValue[\"FREE\"].value === \"S#FE_PM_02643_ADR_02643_GRAN_20180920\")",
									"     ||  (cf[pas].code === \"CF_SUB_COUNTER_BAT\"  && cf[pas].mapValue[\"FREE\"].value === \"1|1|0|0\")",
									"    )",
									"    ;",
									"}",
									"",
									"",
									"",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "eb5a611d-6b81-40f2-b8d5-086ad2b9c99a",
								"exec": [
									"  tests[\"WAIT 10 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 10 seconds before request.\");",
									"  }, 10000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=B%23NTHD16|02-113121",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "B%23NTHD16|02-113121"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc bat 2",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"B#NTHD16|02-113202\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"3 CF sur la ssc\"] = cf.length === 3 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"        (cf[pas].code === \"CF_SUB_REF_PM\"  &&  cf[pas].stringValue === \"ADR_02154_LIEV\")     ",
									"    ||  (cf[pas].code === \"CF_SUB_NB_LGT\"  && cf[pas].longValue === 1)",
									"    ||  (cf[pas].code === \"CF_SUB_PBS\"  && cf[pas].mapValue[\"FREE\"].value === \"S#FE_PM_02643_ADR_02643_GRAN_20180920\")",
									"    ||  (cf[pas].code === \"CF_SUB_COUNTER_BAT\"  && cf[pas].mapValue[\"FREE\"].value === \"1|1|0|0\")",
									")",
									"    ;",
									"}",
									"",
									"",
									"",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=B%23NTHD16|02-113202",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "B%23NTHD16|02-113202"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc bat 3",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"B#NTHD16|02-113004\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"3 CF sur la ssc\"] = cf.length === 3 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"        (cf[pas].code === \"CF_SUB_REF_PM\"  &&  cf[pas].stringValue === \"ADR_02154_LIEV\")     ",
									"    ||  (cf[pas].code === \"CF_SUB_NB_LGT\"  && cf[pas].longValue === 1)",
									"    ||  (cf[pas].code === \"CF_SUB_PBS\"  && cf[pas].mapValue[\"FREE\"].value === \"S#FE_PM_02643_ADR_02643_GRAN_20180920\")",
									"    ||  (cf[pas].code === \"CF_SUB_COUNTER_BAT\"  && cf[pas].mapValue[\"FREE\"].value === \"1|1|0|0\")",
									"    )",
									"    ;",
									"}",
									"",
									"",
									"",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=B%23NTHD16|02-113004",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "B%23NTHD16|02-113004"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc zone",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"Z#NTHD16\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"1 CF sur la ssc\"] = cf.length === 1 ;",
									"",
									"for (let pas = 0; pas < 1; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_INFO\"   &&  cf[pas].stringValue === \"MONO\")   ",
									"   ",
									"    )",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=Z%23NTHD16",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "Z%23NTHD16"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc pbs",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"S#FE_PM_02643_ADR_02643_GRAN_20180920\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields ;",
									"",
									"tests[\"No CF\" ] = cf ===undefined ;",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-BLO-DU-LR5-NRO|02-113121|01022020\"   &&  si[pas].status === \"ACTIVE\")  ",
									"   )",
									"    ;",
									"}",
									"",
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=S%23FE_PM_02643_ADR_02643_GRAN_20180920",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "S%23FE_PM_02643_ADR_02643_GRAN_20180920"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "ssc pm Copy",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"P#ADR_02154_LIEV|5879\";",
									"",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_RESEAU\";",
									"tests[\"status active\"] = jsonData.subscription.status === \"ACTIVE\";",
									"",
									"var cf = jsonData.subscription.customFields.customField ;",
									"",
									"tests[\"4 CF sur la ssc\"] = cf.length === 4 ;",
									"",
									"for (let pas = 0; pas < cf.length; pas++) {",
									"    tests[\"-----CF\" + pas + \" ok \" + cf[pas].code ] = (",
									"    (cf[pas].code === \"CF_SUB_NRO_SUB\"   &&  cf[pas].stringValue === \"N#SHL_02564_NOYA3|415\")   ",
									"   ||",
									"   (cf[pas].code === \"CF_SUB_ETAT_PM\"   &&  cf[pas].stringValue === \"DEPLOYE\")   ",
									"   ||",
									"   (cf[pas].code === \"CF_SUB_INFO\"   )   ",
									"    ||",
									"   (cf[pas].code === \"CF_SUB_ZONE\" &&  cf[pas].stringValue === \"NTHD16\"   ) ",
									"   ",
									"    )",
									"    ;",
									"}",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"tests[\"SI vide\"  ] = si ===null ;"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=P%23ADR_02154_LIEV|5879",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "P%23ADR_02154_LIEV|5879"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create acces 3",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"ACCES\",\n  \"objectType\" : \"CommandeAccesFTTH_V2__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"FREE-ACCESS-FFI1\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n  \"origine\" : \"ACCES\",\n  \"chargeCode\" : \"ACCES_FTTH\",\n  \"uid\" : \"a1n0Q0000000Z6vQAE\",\n  \"quantity\" : 1,\n  \"eventDate\" : \"2019-01-17T17:06:37\",\n  \"details\" : {\n  \"nombreBrassage\" : 1.0,\n \"commande\" : \"PDC-XYZ\",\n \"referenceTechnique\" : \"creation\",\n \"referencePM\" : \"ADR_02154_LIEV\",\n \"idPM\" : \"141\",\n \"dateResiliation\" : null,\n \"commune\" : \"WANNEHAIN\",\n \"churn\" : true,\n \"dateMes\" : \"2019-06-05T16:00:00\",\n \"dateMad\" : \"2019-06-05T16:00:00\",\n \"identifiantImmeuble\" : null,\n \"dateInstallation\" : \"2018-09-11T12:07:02\",\n \"statutRouteOptique\" : \"OK\",\n \"operateurPrecedent\" : \"FREE\",\n \"ordreRouteOptique\" : \"CONFIRMATION\",\n \"statutService\" : \"Activée\",\n \"idService\" : \"SERV-0013441\",\n \"etatMAD\" : \"OK\",\n \"typeCommandeRetenue\" : \"COFI\",\n \"referencePrestationPrise\" : \"FREE-FTTH-600220\",\n \"codeMotifEchecMAD\" : null,\n \"typeRaccordement\" : \"STOC\",\n \"codeAdresse\" : \"596382226X\",\n \"dateAnnulation\" : null,\n \"referencePTO\" : \"NP-ECO1-0149\",\n \"codePostal\" : \"59830\",\n \"referenceNRO\" : \"SHL_59449_ORCH\",\n \"idNRO\" : \"nro1\",\n \"referenceTRONC\" : \"trc1\",\n \"idLM\" : \"1\",\n \"motifEchecCR\" : null,\n \"motifEchecAR\" : null,\n \"causeReprovisioning\" : null,\n \"refCommandePriseInterne\" : \"FOU_PEBROC_20180912_56\",\n \"priseExistante\" : true,\n \"dateDebutFacturation\" : \"2019-06-02T14:58:14\",\n \"dateFinEngagement\" : \"2019-09-11T00:00:00\",\n \"dureeEngagement\" : \"12\",\n \"typeChurn\" : \"ChurnPassifPassif\",\n \"modeStoc\" : false,\n \"etatCR\" : \"OK\",\n \"refPriseCR\" : \"COLDLINE\",\n \"dateCR\" : \"2019-06-15T16:00:00\",\n \"etatAR\" : \"OK\",\n \"typeRouteOptique\" : \"TDC_ACCES_ECO1_02_MOD05\",\n \"dateOperation\" : \"2019-01-17T17:06:37\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.acces.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.acces.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces 3",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#FREE-ACCESS-FFI1\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"CREATED\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_02154_LIEV\" ",
									";",
									"",
									"",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"2 SI sur la ssc\"] = si.length === 2 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")  ",
									"    || (si[pas].code === \"FTTHP-RAB-FFI\"   &&  si[pas].status === \"INACTIVE\")  ",
									"    ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let spas = 0 ; spas < si.length; spas++) {",
									"    var cf = si[spas].customFields.customField ;",
									"    tests[\"-----CF on SI\" + spas + \":\" + si[spas].code + \"=\" + cf.length] =",
									"            (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf.length === 8  ) ",
									"            ||",
									"            (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" &&  cf.length === 4 ) ",
									"            ||",
									"             (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf.length === 8  ) ",
									"            ",
									"            ;",
									"    //tests[\"8 CF sur \"] = cf.length === 8;",
									"    ",
									"    for (let pas = 0; pas < cf.length; pas++) {",
									"        tests[\"----------CF\" + pas + \" ok \" + cf[pas].code + \" on \" + si[spas].code ] = (",
									"           (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" ) ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\")    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        )",
									"        ;",
									"    }",
									"}",
									"",
									""
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "8a5bd4dc-b44a-44a9-961c-668fe3a164ee",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23FREE-ACCESS-FFI1",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23FREE-ACCESS-FFI1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create acces 4",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"ACCES\",\n  \"objectType\" : \"CommandeAccesFTTH_V2__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"FREE-ACCESS-FFI2\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n  \"origine\" : \"ACCES\",\n  \"chargeCode\" : \"ACCES_FTTH\",\n  \"uid\" : \"a1n0Q0000000Z6vQAE\",\n  \"quantity\" : 1,\n  \"eventDate\" : \"2019-01-17T17:06:37\",\n  \"details\" : {\n  \"nombreBrassage\" : 1.0,\n \"commande\" : \"PDC-XYZ\",\n \"referenceTechnique\" : \"creation\",\n \"referencePM\" : \"ADR_02154_LIEV\",\n \"idPM\" : \"141\",\n \"dateResiliation\" : null,\n \"commune\" : \"WANNEHAIN\",\n \"churn\" : true,\n \"dateMes\" : \"2019-06-05T16:00:00\",\n \"dateMad\" : \"2019-06-05T16:00:00\",\n \"identifiantImmeuble\" : null,\n \"dateInstallation\" : \"2018-09-11T12:07:02\",\n \"statutRouteOptique\" : \"OK\",\n \"operateurPrecedent\" : \"FREE\",\n \"ordreRouteOptique\" : \"CONFIRMATION\",\n \"statutService\" : \"Activée\",\n \"idService\" : \"SERV-0013441\",\n \"etatMAD\" : \"OK\",\n \"typeCommandeRetenue\" : \"COFI\",\n \"referencePrestationPrise\" : \"FREE-FTTH-600220\",\n \"codeMotifEchecMAD\" : null,\n \"typeRaccordement\" : \"STOC\",\n \"codeAdresse\" : \"596382226X\",\n \"dateAnnulation\" : null,\n \"referencePTO\" : \"NP-ECO1-0149\",\n \"codePostal\" : \"59830\",\n \"referenceNRO\" : \"SHL_59449_ORCH\",\n \"idNRO\" : \"nro1\",\n \"referenceTRONC\" : \"trc1\",\n \"idLM\" : \"1\",\n \"motifEchecCR\" : null,\n \"motifEchecAR\" : null,\n \"causeReprovisioning\" : null,\n \"refCommandePriseInterne\" : \"FOU_PEBROC_20180912_56\",\n \"priseExistante\" : true,\n \"dateDebutFacturation\" : \"2019-06-02T14:58:14\",\n \"dateFinEngagement\" : \"2019-09-11T00:00:00\",\n \"dureeEngagement\" : \"12\",\n \"typeChurn\" : \"ChurnPassifPassif\",\n \"modeStoc\" : false,\n \"etatCR\" : \"OK\",\n \"refPriseCR\" : \"HOTLINE\",\n \"dateCR\" : \"2019-06-15T16:00:00\",\n \"etatReprov\" : \"TERMINE\",\n \"dateReprov\" : \"2019-06-15T16:00:00\",\n \"etatAR\" : \"OK\",\n \"typeRouteOptique\" : \"TDC_ACCES_ECO1_02_MOD05\",\n \"dateOperation\" : \"2019-01-17T17:06:37\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.acces.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.acces.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces 4",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#FREE-ACCESS-FFI2\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"CREATED\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_02154_LIEV\" ",
									";",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"2 SI sur la ssc\"] = si.length === 2 ;",
									"",
									"",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")  ",
									"    || (si[pas].code === \"FTTHP-RAB-FFI\"   &&  si[pas].status === \"INACTIVE\")  ",
									"    ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let spas = 0 ; spas < si.length; spas++) {",
									"    var cf = si[spas].customFields.customField ;",
									"    tests[\"-----CF on SI\" + spas + \":\" + si[spas].code + \"=\" + cf.length] =",
									"            (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf.length === 8  ) ",
									"            ||",
									"             (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf.length === 8  ) ",
									"            ",
									"            ;",
									"    //tests[\"8 CF sur \"] = cf.length === 8;",
									"    ",
									"    for (let pas = 0; pas < cf.length; pas++) {",
									"        tests[\"----------CF\" + pas + \" ok \" + cf[pas].code + \" on \" + si[spas].code ] = (",
									"           (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" ) ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\")    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        )",
									"        ;",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "4ca945e2-6e67-4840-8805-687aa3d956a7",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23FREE-ACCESS-FFI2",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23FREE-ACCESS-FFI2"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create acces 5",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"ACCES\",\n  \"objectType\" : \"CommandeAccesFTTH_V2__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"FREE-ACCESS-NOFFI3\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n  \"origine\" : \"ACCES\",\n  \"chargeCode\" : \"ACCES_FTTH\",\n  \"uid\" : \"a1n0Q0000000Z6vQAE\",\n  \"quantity\" : 1,\n  \"eventDate\" : \"2019-01-17T17:06:37\",\n  \"details\" : {\n  \"nombreBrassage\" : 1.0,\n \"commande\" : \"PDC-XYZ\",\n \"referenceTechnique\" : \"creation\",\n \"referencePM\" : \"ADR_02154_LIEV\",\n \"idPM\" : \"141\",\n \"dateResiliation\" : null,\n \"commune\" : \"WANNEHAIN\",\n \"churn\" : true,\n \"dateMes\" : \"2019-06-05T16:00:00\",\n \"dateMad\" : \"2019-06-05T16:00:00\",\n \"identifiantImmeuble\" : null,\n \"dateInstallation\" : \"2018-09-11T12:07:02\",\n \"statutRouteOptique\" : \"OK\",\n \"operateurPrecedent\" : \"FREE\",\n \"ordreRouteOptique\" : \"CONFIRMATION\",\n \"statutService\" : \"Activée\",\n \"idService\" : \"SERV-0013441\",\n \"etatMAD\" : \"OK\",\n \"typeCommandeRetenue\" : \"COFI\",\n \"referencePrestationPrise\" : \"FREE-FTTH-600220\",\n \"codeMotifEchecMAD\" : null,\n \"typeRaccordement\" : \"STOC\",\n \"codeAdresse\" : \"596382226X\",\n \"dateAnnulation\" : null,\n \"referencePTO\" : \"NP-ECO1-0149\",\n \"codePostal\" : \"59830\",\n \"referenceNRO\" : \"SHL_59449_ORCH\",\n \"idNRO\" : \"nro1\",\n \"referenceTRONC\" : \"trc1\",\n \"idLM\" : \"1\",\n \"motifEchecCR\" : null,\n \"motifEchecAR\" : null,\n \"causeReprovisioning\" : null,\n \"refCommandePriseInterne\" : \"FOU_PEBROC_20180912_56\",\n \"priseExistante\" : true,\n \"dateDebutFacturation\" : \"2019-06-02T14:58:14\",\n \"dateFinEngagement\" : \"2019-09-11T00:00:00\",\n \"dureeEngagement\" : \"12\",\n \"typeChurn\" : \"ChurnPassifPassif\",\n \"modeStoc\" : false,\n \"etatCR\" : \"OK\",\n \"refPriseCR\" : \"HOTLINE\",\n \"dateCR\" : \"2019-06-15T16:00:00\",\n \"etatReprov\" : \"TERMINE\",\n \"etatAR\" : \"OK\",\n \"typeRouteOptique\" : \"TDC_ACCES_ECO1_02_MOD05\",\n \"dateOperation\" : \"2019-01-17T17:06:37\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.acces.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.acces.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces 5",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#FREE-ACCESS-NOFFI3\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"CREATED\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_02154_LIEV\" ",
									";",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")   ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")  ",
									"",
									"    ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let spas = 0 ; spas < si.length; spas++) {",
									"    var cf = si[spas].customFields.customField ;",
									"    tests[\"-----CF on SI\" + spas + \":\" + si[spas].code + \"=\" + cf.length] =",
									"            (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf.length === 8  ) ",
									"            ||",
									"            (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" &&  cf.length === 4 ) ",
									"            ||",
									"             (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf.length === 8  ) ",
									"            ",
									"            ;",
									"    //tests[\"8 CF sur \"] = cf.length === 8;",
									"    ",
									"    for (let pas = 0; pas < cf.length; pas++) {",
									"        tests[\"----------CF\" + pas + \" ok \" + cf[pas].code + \" on \" + si[spas].code ] = (",
									"           (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" ) ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\")    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        )",
									"        ;",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "8d356e21-f2ef-4fa8-b289-c4503caae8a0",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23FREE-ACCESS-NOFFI3",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23FREE-ACCESS-NOFFI3"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create acces 6",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"ACCES\",\n  \"objectType\" : \"CommandeAccesFTTH_V2__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"FREE-ACCESS-NOFFI4\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n  \"origine\" : \"ACCES\",\n  \"chargeCode\" : \"ACCES_FTTH\",\n  \"uid\" : \"a1n0Q0000000Z6vQAE\",\n  \"quantity\" : 1,\n  \"eventDate\" : \"2019-01-17T17:06:37\",\n  \"details\" : {\n  \"nombreBrassage\" : 1.0,\n \"commande\" : \"PDC-XYZ\",\n \"referenceTechnique\" : \"creation\",\n \"referencePM\" : \"ADR_02154_LIEV\",\n \"idPM\" : \"141\",\n \"dateResiliation\" : null,\n \"commune\" : \"WANNEHAIN\",\n \"churn\" : true,\n \"dateMes\" : \"2019-06-05T16:00:00\",\n \"dateMad\" : \"2019-06-05T16:00:00\",\n \"identifiantImmeuble\" : null,\n \"dateInstallation\" : \"2018-09-11T12:07:02\",\n \"statutRouteOptique\" : \"OK\",\n \"operateurPrecedent\" : \"FREE\",\n \"ordreRouteOptique\" : \"CONFIRMATION\",\n \"statutService\" : \"Activée\",\n \"idService\" : \"SERV-0013441\",\n \"etatMAD\" : \"OK\",\n \"typeCommandeRetenue\" : \"COFI\",\n \"referencePrestationPrise\" : \"FREE-FTTH-600220\",\n \"codeMotifEchecMAD\" : null,\n \"typeRaccordement\" : \"STOC\",\n \"codeAdresse\" : \"596382226X\",\n \"dateAnnulation\" : null,\n \"referencePTO\" : \"NP-ECO1-0149\",\n \"codePostal\" : \"59830\",\n \"referenceNRO\" : \"SHL_59449_ORCH\",\n \"idNRO\" : \"nro1\",\n \"referenceTRONC\" : \"trc1\",\n \"idLM\" : \"1\",\n \"motifEchecCR\" : null,\n \"motifEchecAR\" : null,\n \"causeReprovisioning\" : null,\n \"refCommandePriseInterne\" : \"FOU_PEBROC_20180912_56\",\n \"priseExistante\" : true,\n \"dateDebutFacturation\" : \"2019-06-02T14:58:14\",\n \"dateFinEngagement\" : \"2019-09-11T00:00:00\",\n \"dureeEngagement\" : \"12\",\n \"typeChurn\" : \"ChurnPassifPassif\",\n \"modeStoc\" : false,\n \"etatCR\" : \"OK\",\n \"refPriseCR\" : \"HOTLINE\",\n \"dateCR\" : \"2019-06-15T16:00:00\",\n \"etatReprov\" : \"START\",\n \"dateReprov\" : \"2019-06-15T16:00:00\",\n \"etatAR\" : \"OK\",\n \"typeRouteOptique\" : \"TDC_ACCES_ECO1_02_MOD05\",\n \"dateOperation\" : \"2019-01-17T17:06:37\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.acces.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.acces.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces 6",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#FREE-ACCESS-NOFFI4\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"CREATED\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_02154_LIEV\" ",
									";",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")   ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")  ",
									"  ",
									"    ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let spas = 0 ; spas < si.length; spas++) {",
									"    var cf = si[spas].customFields.customField ;",
									"    tests[\"-----CF on SI\" + spas + \":\" + si[spas].code + \"=\" + cf.length] =",
									"            (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf.length === 8  ) ",
									"            ||",
									"            (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" &&  cf.length === 4 ) ",
									"            ||",
									"             (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf.length === 8  ) ",
									"            ",
									"            ;",
									"    //tests[\"8 CF sur \"] = cf.length === 8;",
									"    ",
									"    for (let pas = 0; pas < cf.length; pas++) {",
									"        tests[\"----------CF\" + pas + \" ok \" + cf[pas].code + \" on \" + si[spas].code ] = (",
									"           (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" ) ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\")    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        )",
									"        ;",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "e720553e-a123-4139-93a4-686ff15a71c0",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23FREE-ACCESS-NOFFI4",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23FREE-ACCESS-NOFFI4"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create acces 7",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"ACCES\",\n  \"objectType\" : \"CommandeAccesFTTH_V2__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"FREE-ACCESS-NOFFI5\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n  \"origine\" : \"ACCES\",\n  \"chargeCode\" : \"ACCES_FTTH\",\n  \"uid\" : \"a1n0Q0000000Z6vQAE\",\n  \"quantity\" : 1,\n  \"eventDate\" : \"2019-01-17T17:06:37\",\n  \"details\" : {\n  \"nombreBrassage\" : 1.0,\n \"commande\" : \"PDC-XYZ\",\n \"referenceTechnique\" : \"creation\",\n \"referencePM\" : \"ADR_02154_LIEV\",\n \"idPM\" : \"141\",\n \"dateResiliation\" : null,\n \"commune\" : \"WANNEHAIN\",\n \"churn\" : true,\n \"dateMes\" : \"2019-06-05T16:00:00\",\n \"dateMad\" : \"2019-06-05T16:00:00\",\n \"identifiantImmeuble\" : null,\n \"dateInstallation\" : \"2018-09-11T12:07:02\",\n \"statutRouteOptique\" : \"OK\",\n \"operateurPrecedent\" : \"FREE\",\n \"ordreRouteOptique\" : \"CONFIRMATION\",\n \"statutService\" : \"Activée\",\n \"idService\" : \"SERV-0013441\",\n \"etatMAD\" : \"OK\",\n \"typeCommandeRetenue\" : \"COFI\",\n \"referencePrestationPrise\" : \"FREE-FTTH-600220\",\n \"codeMotifEchecMAD\" : null,\n \"typeRaccordement\" : \"STOC\",\n \"codeAdresse\" : \"596382226X\",\n \"dateAnnulation\" : null,\n \"referencePTO\" : \"NP-ECO1-0149\",\n \"codePostal\" : \"59830\",\n \"referenceNRO\" : \"SHL_59449_ORCH\",\n \"idNRO\" : \"nro1\",\n \"referenceTRONC\" : \"trc1\",\n \"idLM\" : \"1\",\n \"motifEchecCR\" : null,\n \"motifEchecAR\" : null,\n \"causeReprovisioning\" : null,\n \"refCommandePriseInterne\" : \"FOU_PEBROC_20180912_56\",\n \"priseExistante\" : true,\n \"dateDebutFacturation\" : \"2019-06-02T14:58:14\",\n \"dateFinEngagement\" : \"2019-09-11T00:00:00\",\n \"dureeEngagement\" : \"12\",\n \"typeChurn\" : \"ChurnPassifPassif\",\n \"modeStoc\" : false,\n \"etatCR\" : \"KO\",\n \"refPriseCR\" : \"COLDLINE\",\n \"dateCR\" : \"2019-06-15T16:00:00\",\n \"etatReprov\" : \"TERMINE\",\n \"dateReprov\" : \"2019-06-15T16:00:00\",\n \"etatAR\" : \"OK\",\n \"typeRouteOptique\" : \"TDC_ACCES_ECO1_02_MOD05\",\n \"dateOperation\" : \"2019-01-17T17:06:37\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.acces.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.acces.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces 7",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#FREE-ACCESS-NOFFI5\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"CREATED\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_02154_LIEV\" ",
									";",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")   ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")  ",
									" ",
									"    ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let spas = 0 ; spas < si.length; spas++) {",
									"    var cf = si[spas].customFields.customField ;",
									"    tests[\"-----CF on SI\" + spas + \":\" + si[spas].code + \"=\" + cf.length] =",
									"            (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf.length === 8  ) ",
									"            ||",
									"            (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" &&  cf.length === 4 ) ",
									"            ||",
									"             (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf.length === 8  ) ",
									"            ",
									"            ;",
									"    //tests[\"8 CF sur \"] = cf.length === 8;",
									"    ",
									"    for (let pas = 0; pas < cf.length; pas++) {",
									"        tests[\"----------CF\" + pas + \" ok \" + cf[pas].code + \" on \" + si[spas].code ] = (",
									"           (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" ) ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\")    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        )",
									"        ;",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "3574f267-d486-4639-931f-866133609dc9",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23FREE-ACCESS-NOFFI5",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23FREE-ACCESS-NOFFI5"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "create acces 8",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"",
									"tests[responseBody] = responseBody === \"Message sent\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "!admin123",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"source\" : \"ACCES\",\n  \"objectType\" : \"CommandeAccesFTTH_V2__c\",\n  \"operation\" : \"CREATION\",\n  \"access\" : \"FREE-ACCESS-NOFFI6\",\n  \"oc\" : \"FREE\",\n  \"oi\" : \"NPDC\",\n  \"origine\" : \"ACCES\",\n  \"chargeCode\" : \"ACCES_FTTH\",\n  \"uid\" : \"a1n0Q0000000Z6vQAE\",\n  \"quantity\" : 1,\n  \"eventDate\" : \"2019-01-17T17:06:37\",\n  \"details\" : {\n  \"nombreBrassage\" : 1.0,\n \"commande\" : \"PDC-XYZ\",\n \"referenceTechnique\" : \"creation\",\n \"referencePM\" : \"ADR_02154_LIEV\",\n \"idPM\" : \"141\",\n \"dateResiliation\" : null,\n \"commune\" : \"WANNEHAIN\",\n \"churn\" : true,\n \"dateMes\" : \"2019-06-05T16:00:00\",\n \"dateMad\" : \"2019-06-05T16:00:00\",\n \"identifiantImmeuble\" : null,\n \"dateInstallation\" : \"2018-09-11T12:07:02\",\n \"statutRouteOptique\" : \"OK\",\n \"operateurPrecedent\" : \"FREE\",\n \"ordreRouteOptique\" : \"CONFIRMATION\",\n \"statutService\" : \"Activée\",\n \"idService\" : \"SERV-0013441\",\n \"etatMAD\" : \"OK\",\n \"typeCommandeRetenue\" : \"COFI\",\n \"referencePrestationPrise\" : \"FREE-FTTH-600220\",\n \"codeMotifEchecMAD\" : null,\n \"typeRaccordement\" : \"STOC\",\n \"codeAdresse\" : \"596382226X\",\n \"dateAnnulation\" : null,\n \"referencePTO\" : \"NP-ECO1-0149\",\n \"codePostal\" : \"59830\",\n \"referenceNRO\" : \"SHL_59449_ORCH\",\n \"idNRO\" : \"nro1\",\n \"referenceTRONC\" : \"trc1\",\n \"idLM\" : \"1\",\n \"motifEchecCR\" : null,\n \"motifEchecAR\" : null,\n \"causeReprovisioning\" : null,\n \"refCommandePriseInterne\" : \"FOU_PEBROC_20180912_56\",\n \"priseExistante\" : true,\n \"dateDebutFacturation\" : \"2019-06-02T14:58:14\",\n \"dateFinEngagement\" : \"2019-09-11T00:00:00\",\n \"dureeEngagement\" : \"12\",\n \"typeChurn\" : \"ChurnPassifPassif\",\n \"modeStoc\" : false,\n \"etatCR\" : \"OK\",\n \"refPriseCR\" : \"COLDLINE\",\n \"etatReprov\" : \"TERMINE\",\n \"dateReprov\" : \"2019-06-15T16:00:00\",\n \"etatAR\" : \"OK\",\n \"typeRouteOptique\" : \"TDC_ACCES_ECO1_02_MOD05\",\n \"dateOperation\" : \"2019-01-17T17:06:37\"\n  }\n}"
						},
						"url": {
							"raw": "{{activeMQ.url}}/api/message/OPENCELL_QUEUE?type=queue&schema=application/vnd.pebroc.event.acces.v0%2Bjson",
							"host": [
								"{{activeMQ.url}}"
							],
							"path": [
								"api",
								"message",
								"OPENCELL_QUEUE"
							],
							"query": [
								{
									"key": "type",
									"value": "queue"
								},
								{
									"key": "schema",
									"value": "application/vnd.pebroc.event.acces.v0%2Bjson"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "getAcces 8",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"tests[\"ssc code ok\"] = jsonData.subscription.code === \"ACCES#FREE-ACCESS-NOFFI6\";",
									"tests[\"ua ok\"] = jsonData.subscription.userAccount === \"FREE-NPDC\";",
									"tests[\"ot ok\"] = jsonData.subscription.offerTemplate === \"OFFRE_FTTH_PASSIF\";",
									"tests[\"status created\"] = jsonData.subscription.status === \"CREATED\";",
									"",
									"",
									"tests[\"1 CF\"] = jsonData.subscription.customFields.customField.length === 1;",
									"",
									"tests[\"CF Reférence PM\"] = ",
									"    jsonData.subscription.customFields.customField[0].code === \"CF_SUB_REF_PM\" ",
									"    &&",
									"    jsonData.subscription.customFields.customField[0].stringValue === \"ADR_02154_LIEV\" ",
									";",
									"",
									"",
									"var si = jsonData.subscription.services.serviceInstance ;",
									"",
									"tests[\"1 SI sur la ssc\"] = si.length === 1 ;",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")   ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let pas = 0; pas < si.length; pas++) {",
									"    tests[\"-----SI\" + pas + \" ok \" + si[pas].code ] = (",
									"    (si[pas].code === \"FTTHP-RAB-OI-CRE\"   &&  si[pas].status === \"INACTIVE\")  ",
									"  ",
									"    ",
									"   )",
									"    ;",
									"}",
									"",
									"for (let spas = 0 ; spas < si.length; spas++) {",
									"    var cf = si[spas].customFields.customField ;",
									"    tests[\"-----CF on SI\" + spas + \":\" + si[spas].code + \"=\" + cf.length] =",
									"            (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf.length === 8  ) ",
									"            ||",
									"            (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" &&  cf.length === 4 ) ",
									"            ||",
									"             (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf.length === 8  ) ",
									"            ",
									"            ;",
									"    //tests[\"8 CF sur \"] = cf.length === 8;",
									"    ",
									"    for (let pas = 0; pas < cf.length; pas++) {",
									"        tests[\"----------CF\" + pas + \" ok \" + cf[pas].code + \" on \" + si[spas].code ] = (",
									"           (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" ) ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\")    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-FFI\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-LOC-NRO_2019-06-01\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_QUANTITY\" )    ",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_TOTAL_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_UNIT_PRICE\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_INVOICE_DATA\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_NB_BRASSAGE\" && cf[pas].doubleValue === 1)",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_INSTALLATION\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DEAL_NAME\" )",
									"        || (si[spas].code ===  \"FTTHP-RAB-OI-CRE\" && cf[pas].code === \"CF_SRV_DATE_MES\")",
									"        )",
									"        ;",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "01b6a8fb-4cf2-45b4-a280-398e73b40022",
								"exec": [
									"  tests[\"WAIT 1 second\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 1 seconds before request.\");",
									"  }, 1000);"
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/billing/subscription?subscriptionCode=ACCES%23FREE-ACCESS-NOFFI6",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"billing",
								"subscription"
							],
							"query": [
								{
									"key": "subscriptionCode",
									"value": "ACCES%23FREE-ACCESS-NOFFI6"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "job activation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"EOM_ACTIVATION\",\n\n  \"customFields\" : {\n    \"customField\" : [ {\n      \"code\" : \"ScriptingJob_variables\",\n\n      \"mapValue\" : {\n        \"BA_CODE\" : {\"value\" : \"FREE\" },\n        \"FROM_DATE\" : {\"value\" : \"01/06/2019\"}\n      }\n    } ]\n  }\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/execute",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "fin activation",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b4f7588c-97eb-4b3b-b433-9944b842b9cc",
								"exec": [
									"  tests[\"WAIT 10 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 10 seconds before request.\");",
									"  }, 10000);",
									"",
									"  "
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=EOM_ACTIVATION",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "EOM_ACTIVATION"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "job acces",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"EOM_COMPUTE_ACCES\",\n\n  \"customFields\" : {\n    \"customField\" : [ {\n      \"code\" : \"ScriptingJob_variables\",\n\n      \"mapValue\" : {\n        \"BA_CODE\" : {\"value\" : \"FREE\" },\n        \"FROM_DATE\" : {\"value\" : \"01/10/2019\"}\n      }\n    } ]\n  }\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/execute",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "fin acces",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b4f7588c-97eb-4b3b-b433-9944b842b9cc",
								"exec": [
									"  tests[\"WAIT 10 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 10 seconds before request.\");",
									"  }, 10000);",
									"",
									"  "
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=EOM_COMPUTE_ACCES",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "EOM_COMPUTE_ACCES"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "job cofi",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "64c31ed8-9501-4785-b95a-28cdbee93476",
								"exec": [
									"var date2=new Date(\"1995-12-17T03:24:00\");",
									"var date1=new Date();",
									"var formated_date = date1.getFullYear() + \"-\" + (\"0\"+(date1.getMonth()+1)).slice(-2) + \"-\" + (\"0\"+date1.getDate()).slice(-2);",
									"frenchFormat = \"01/\" +  (\"0\"+(date1.getMonth()+1)).slice(-2) + \"/\" +date1.getFullYear() ;",
									"",
									"codeFormat = \"01\" +  (\"0\"+(date1.getMonth()+1)).slice(-2)  +date1.getFullYear() ;",
									"",
									"",
									"//tests[formated_date] = true;",
									"//tests[frenchFormat] = true;",
									"//tests[codeFormat] = true;",
									"pm.environment.set(\"frenchFormat\", frenchFormat);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"EOM_COMPUTE_COFI\",\n\n  \"customFields\" : {\n    \"customField\" : [ {\n      \"code\" : \"ScriptingJob_variables\",\n\n      \"mapValue\" : {\n        \"BA_CODE\" : {\"value\" : \"FREE\" },\n        \"FROM_DATE\" : {\"value\" : \"01/02/2020\"}\n        ,    \"ex\" :  {\"value\" : \"{{frenchFormat}}\"}\n      }\n    } ]\n  }\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/execute",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "fin cofi",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b4f7588c-97eb-4b3b-b433-9944b842b9cc",
								"exec": [
									"  tests[\"WAIT 10 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 10 seconds before request.\");",
									"  }, 10000);",
									"",
									"  "
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=EOM_COMPUTE_COFI",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "EOM_COMPUTE_COFI"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "job cacti",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "64c31ed8-9501-4785-b95a-28cdbee93476",
								"exec": [
									"var date2=new Date(\"1995-12-17T03:24:00\");",
									"var date1=new Date();",
									"var formated_date = date1.getFullYear() + \"-\" + (\"0\"+(date1.getMonth()+1)).slice(-2) + \"-\" + (\"0\"+date1.getDate()).slice(-2);",
									"frenchFormat = \"01/\" +  (\"0\"+(date1.getMonth()+1)).slice(-2) + \"/\" +date1.getFullYear() ;",
									"",
									"codeFormat = \"01\" +  (\"0\"+(date1.getMonth()+1)).slice(-2)  +date1.getFullYear() ;",
									"",
									"",
									"//tests[formated_date] = true;",
									"//tests[frenchFormat] = true;",
									"//tests[codeFormat] = true;",
									"pm.environment.set(\"frenchFormat\", frenchFormat);"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"EOM_COMPUTE_CACTI\",\n\n  \"customFields\" : {\n    \"customField\" : [ {\n      \"code\" : \"ScriptingJob_variables\",\n\n      \"mapValue\" : {\n        \"BA_CODE\" : {\"value\" : \"FREE\" },\n        \"FROM_DATE\" : {\"value\" : \"01/06/2019\"}\n        ,    \"ex\" :  {\"value\" : \"{{frenchFormat}}\"}\n      }\n    } ]\n  }\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/execute",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "fin cacti",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b4f7588c-97eb-4b3b-b433-9944b842b9cc",
								"exec": [
									"  tests[\"WAIT 10 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 10 seconds before request.\");",
									"  }, 10000);",
									"",
									"  "
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=EOM_COMPUTE_CACTI",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "EOM_COMPUTE_CACTI"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "job invoice",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "64c31ed8-9501-4785-b95a-28cdbee93476",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"INVOICING\",\n\n  \"customFields\" : {\n    \"customField\" : [ {\n      \"code\" : \"ScriptingJob_variables\",\n\n      \"mapValue\" : {\n        \"BA_CODE\" : {\"value\" : \"FREE\" },\n        \"FROM_DATE\" : {\"value\" : \"01/02/2018\"}, \n        \"TO_DATE\" : {\"value\" : \"01/02/2021\"},\n        \"PROFORMA\" : {\"value\" : \"true\"},\n        \"INVOICE_MODE\" : {\"value\" : \"proforma\"},\n        \"INVOICE_TEMPLATE_FOLDER\" : {\"value\" : \"/opt/jboss/opencelldata/template\"},\n        \"INVOICE_FOLDER\" : {\"value\" : \"/opt/jboss/opencelldata/invoices\"}\n        \n      }\n    } ]\n  }\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/execute",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "fin invoice",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b4f7588c-97eb-4b3b-b433-9944b842b9cc",
								"exec": [
									"  tests[\"WAIT 30 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 30 seconds before request.\");",
									"  }, 30000);",
									"",
									"  "
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=INVOICING",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "INVOICING"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "job invoice reel",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "64c31ed8-9501-4785-b95a-28cdbee93476",
								"exec": [
									""
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"name": "Content-Type",
								"type": "text",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"code\" : \"INVOICING\",\n\n  \"customFields\" : {\n    \"customField\" : [ {\n      \"code\" : \"ScriptingJob_variables\",\n\n      \"mapValue\" : {\n        \"BA_CODE\" : {\"value\" : \"FREE\" },\n        \"FROM_DATE\" : {\"value\" : \"01/02/2016\"}, \n        \"TO_DATE\" : {\"value\" : \"01/02/2021\"},\n        \"INVOICE_MODE\" : {\"value\" : \"reel\"},\n        \"INVOICE_TEMPLATE_FOLDER\" : {\"value\" : \"/opt/jboss/opencelldata/template\"},\n        \"INVOICE_FOLDER\" : {\"value\" : \"/opt/jboss/opencelldata/invoices\"}\n        \n      }\n    } ]\n  }\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/execute",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"execute"
							]
						}
					},
					"response": []
				},
				{
					"name": "fin invoice reel",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "2f8c742d-538e-4759-8d34-9f50ac8abd1a",
								"exec": [
									"var jsonData = JSON.parse(responseBody);",
									"tests[\"is.success\"] = jsonData.actionStatus.status === \"SUCCESS\";",
									"",
									"tests[\"nbItemsCorrectlyProcessed = 1\"] = jsonData.jobExecutionResultDto.nbItemsCorrectlyProcessed === 1;",
									"",
									"tests[\"nbItemsProcessedWithError = 0\"] = jsonData.jobExecutionResultDto.nbItemsProcessedWithError === 0;"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "b4f7588c-97eb-4b3b-b433-9944b842b9cc",
								"exec": [
									"  tests[\"WAIT 30 seconds\"] = true;",
									"  setTimeout(function(){",
									"          console.log(\"Sleeping for 30 seconds before request.\");",
									"  }, 30000);",
									"",
									"  "
								],
								"type": "text/javascript"
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{ \n  \"code\" : \"BOUY-AXIONE\",\n  \"billingAccount\" : \"BOUY\",\n  \"customerAccount\" : \"BOUY\"\n}"
						},
						"url": {
							"raw": "{{opencell.url}}/job/jobReport?code=INVOICING",
							"host": [
								"{{opencell.url}}"
							],
							"path": [
								"job",
								"jobReport"
							],
							"query": [
								{
									"key": "code",
									"value": "INVOICING"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "basic",
		"basic": [
			{
				"key": "username",
				"value": "{{opencell.username}}",
				"type": "string"
			},
			{
				"key": "password",
				"value": "{{opencell.password}}",
				"type": "string"
			},
			{
				"key": "saveHelperData",
				"value": true,
				"type": "boolean"
			},
			{
				"key": "showPassword",
				"value": false,
				"type": "boolean"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "2c3cf5f0-2b28-4083-9a3c-041b66b98016",
				"type": "text/javascript",
				"exec": [
					"pm.globals.set(\"request.label\", pm.info.requestName);",
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "9466e85e-84c0-4485-abf5-d4ec07ba55ef",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	]
}